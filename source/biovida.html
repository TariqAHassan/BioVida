<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>biovida package &#8212; BioVida 0.1.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.3.6/simplex/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          BioVida</a>
        <span class="navbar-text navbar-version pull-left"><b>0.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="https://github.com/TariqAHassan/BioVida">View on GitHub</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../GettingStarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GettingStarted.html#installation">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GettingStarted.html#dependencies">Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API.html">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-biovida.images.openi_interface">Images</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../API.html#open-i-interface">Open-i Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API.html#cancer-imaging-archive-interface">Cancer Imaging Archive Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API.html#image-processing">Image Processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API.html#image-classification">Image Classification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API.html#template-matching">Template Matching</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API.html#border-and-edge-detection">Border and Edge Detection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-biovida.genomics.disgenet_interface">Genomics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../API.html#disgenet-interface">DisGeNET Interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-biovida.diagnostics.disease_ont_interface">Diagnostics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../API.html#disease-ontology-interface">Disease Ontology Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API.html#disease-symptoms-interface">Disease-Symptoms Interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-biovida.unification.unify_domains">Domain Integration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../API.html#unifying-across-domains">Unifying Across Domains</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-biovida.images.image_cache_mgmt">Cache Manipulation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../API.html#image-cache-management">Image Cache Management</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-biovida.support_tools.utilities">Support Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../API.html#utilities">Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API.html#printing-tools">Printing Tools</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Current Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">biovida package</a><ul>
<li><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-biovida.images.openi_interface">biovida.images.openi_interface module</a><ul>
<li><a class="reference internal" href="#open-i-interface">Open-i Interface</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-biovida.images.cancer_image_interface">biovida.images.cancer_image_interface module</a><ul>
<li><a class="reference internal" href="#cancer-imaging-archive-interface">Cancer Imaging Archive Interface</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-biovida.images.image_processing">biovida.images.image_processing module</a><ul>
<li><a class="reference internal" href="#image-processing">Image Processing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#biovida-images-models-image-classification-module">biovida.images.models.image_classification module</a></li>
<li><a class="reference internal" href="#module-biovida.images.models.template_matching">biovida.images.models.template_matching module</a><ul>
<li><a class="reference internal" href="#template-matching">Template Matching</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-biovida.images.models.border_detection">biovida.images.models.border_detection module</a><ul>
<li><a class="reference internal" href="#border-and-edge-detection">Border and Edge Detection</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-biovida.genomics.disgenet_interface">biovida.genomics.disgenet_interface module</a><ul>
<li><a class="reference internal" href="#disgenet-interface">DisGeNET Interface</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-biovida.diagnostics.disease_ont_interface">biovida.diagnostics.disease_ont_interface</a><ul>
<li><a class="reference internal" href="#disease-ontology-interface">Disease Ontology Interface</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-biovida.diagnostics.disease_symptoms_interface">biovida.diagnostics.disease_symptoms_interface</a><ul>
<li><a class="reference internal" href="#disease-symptoms-interface">Disease-Symptoms Interface</a></li>
</ul>
</li>
<li><a class="reference internal" href="#biovida-unify-domains">biovida.unify_domains</a></li>
<li><a class="reference internal" href="#module-biovida.images.image_cache_mgmt">biovida.image_cache_mgmt</a><ul>
<li><a class="reference internal" href="#image-cache-management">Image Cache Management</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-biovida.support_tools.printing">biovida.support_tools</a><ul>
<li><a class="reference internal" href="#printing-tools">Printing Tools</a></li>
<li><a class="reference internal" href="#utilities">Utilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-biovida">Module contents</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">biovida package</a><ul>
<li><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-biovida.images.openi_interface">biovida.images.openi_interface module</a><ul>
<li><a class="reference internal" href="#open-i-interface">Open-i Interface</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-biovida.images.cancer_image_interface">biovida.images.cancer_image_interface module</a><ul>
<li><a class="reference internal" href="#cancer-imaging-archive-interface">Cancer Imaging Archive Interface</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-biovida.images.image_processing">biovida.images.image_processing module</a><ul>
<li><a class="reference internal" href="#image-processing">Image Processing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#biovida-images-models-image-classification-module">biovida.images.models.image_classification module</a></li>
<li><a class="reference internal" href="#module-biovida.images.models.template_matching">biovida.images.models.template_matching module</a><ul>
<li><a class="reference internal" href="#template-matching">Template Matching</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-biovida.images.models.border_detection">biovida.images.models.border_detection module</a><ul>
<li><a class="reference internal" href="#border-and-edge-detection">Border and Edge Detection</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-biovida.genomics.disgenet_interface">biovida.genomics.disgenet_interface module</a><ul>
<li><a class="reference internal" href="#disgenet-interface">DisGeNET Interface</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-biovida.diagnostics.disease_ont_interface">biovida.diagnostics.disease_ont_interface</a><ul>
<li><a class="reference internal" href="#disease-ontology-interface">Disease Ontology Interface</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-biovida.diagnostics.disease_symptoms_interface">biovida.diagnostics.disease_symptoms_interface</a><ul>
<li><a class="reference internal" href="#disease-symptoms-interface">Disease-Symptoms Interface</a></li>
</ul>
</li>
<li><a class="reference internal" href="#biovida-unify-domains">biovida.unify_domains</a></li>
<li><a class="reference internal" href="#module-biovida.images.image_cache_mgmt">biovida.image_cache_mgmt</a><ul>
<li><a class="reference internal" href="#image-cache-management">Image Cache Management</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-biovida.support_tools.printing">biovida.support_tools</a><ul>
<li><a class="reference internal" href="#printing-tools">Printing Tools</a></li>
<li><a class="reference internal" href="#utilities">Utilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-biovida">Module contents</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="biovida-package">
<h1>biovida package<a class="headerlink" href="#biovida-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-biovida.images.openi_interface">
<span id="biovida-images-openi-interface-module"></span><h2>biovida.images.openi_interface module<a class="headerlink" href="#module-biovida.images.openi_interface" title="Permalink to this headline">¶</a></h2>
<div class="section" id="open-i-interface">
<h3>Open-i Interface<a class="headerlink" href="#open-i-interface" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="biovida.images.openi_interface.OpeniInterface">
<em class="property">class </em><code class="descclassname">biovida.images.openi_interface.</code><code class="descname">OpeniInterface</code><span class="sig-paren">(</span><em>cache_path=None</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/openi_interface.html#OpeniInterface"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.openi_interface.OpeniInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Python Interface for the NIH’s <a class="reference external" href="https://openi.nlm.nih.gov">Open-i</a> API.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cache_path</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – path to the location of the BioVida cache. If a cache does not exist in this location,
one will created. Default to <code class="docutils literal"><span class="pre">None</span></code>, which will generate a cache in the home folder.</li>
<li><strong>verbose</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code> print additional details.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="biovida.images.openi_interface.OpeniInterface.save_records_db">
<code class="descname">save_records_db</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/openi_interface.html#OpeniInterface.save_records_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.openi_interface.OpeniInterface.save_records_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the current <code class="docutils literal"><span class="pre">records_db</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<code class="docutils literal"><span class="pre">str</span></code>) – a system path ending with the ‘.p’ file extension.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.images.openi_interface.OpeniInterface.load_records_db">
<code class="descname">load_records_db</code><span class="sig-paren">(</span><em>records_db</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/openi_interface.html#OpeniInterface.load_records_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.openi_interface.OpeniInterface.load_records_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a <code class="docutils literal"><span class="pre">records_db</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>records_db</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">Pandas</span> <span class="pre">DataFrame</span></code>) – a system path or <code class="docutils literal"><span class="pre">records_db</span></code> itself.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="biovida.images.openi_interface.OpeniInterface.records_db_short">
<code class="descname">records_db_short</code><a class="headerlink" href="#biovida.images.openi_interface.OpeniInterface.records_db_short" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <cite>records_db</cite> with nonessential columns removed.</p>
</dd></dl>

<dl class="attribute">
<dt id="biovida.images.openi_interface.OpeniInterface.cache_records_db_short">
<code class="descname">cache_records_db_short</code><a class="headerlink" href="#biovida.images.openi_interface.OpeniInterface.cache_records_db_short" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <cite>cache_records_db</cite> with nonessential columns removed.</p>
</dd></dl>

<dl class="method">
<dt id="biovida.images.openi_interface.OpeniInterface.options">
<code class="descname">options</code><span class="sig-paren">(</span><em>search_parameter=None</em>, <em>print_options=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/openi_interface.html#OpeniInterface.options"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.openi_interface.OpeniInterface.options" title="Permalink to this definition">¶</a></dt>
<dd><p>Options for parameters of <code class="docutils literal"><span class="pre">search()</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>search_parameter</strong> (<code class="docutils literal"><span class="pre">str</span></code>) – one of: ‘image_type’, ‘rankby’, ‘article_type’, ‘subset’, ‘collection’, ‘fields’,
‘specialties’, ‘video’ or <cite>exclusions</cite>. If <code class="docutils literal"><span class="pre">None</span></code>, print the parameters
of <code class="docutils literal"><span class="pre">search()</span></code>.</li>
<li><strong>print_options</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code>, pretty print the options, else return as a <code class="docutils literal"><span class="pre">list</span></code>. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">a list of valid values for a given search <code class="docutils literal"><span class="pre">search_parameter</span></code>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">list</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.images.openi_interface.OpeniInterface.search">
<code class="descname">search</code><span class="sig-paren">(</span><em>query=None, image_type=None, rankby=None, article_type=None, subset=None, collection=None, fields=None, specialties=None, video=None, exclusions=[‘graphics’], print_results=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/openi_interface.html#OpeniInterface.search"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.openi_interface.OpeniInterface.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Tool to generate a search term (URL) for the NIH’s Open-i API.
The computed term is stored as a class attribute (<code class="docutils literal"><span class="pre">INSTANCE.current_search_url</span></code>)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>query</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – a search term. <code class="docutils literal"><span class="pre">None</span></code> will be converted to an empty string.</li>
<li><strong>image_type</strong> (<code class="docutils literal"><span class="pre">str</span></code>, <code class="docutils literal"><span class="pre">list</span></code>, <code class="docutils literal"><span class="pre">tuple</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – see <code class="docutils literal"><span class="pre">OpeniInterface().options('image_type')</span></code> for valid values.</li>
<li><strong>rankby</strong> (<code class="docutils literal"><span class="pre">str</span></code>, <code class="docutils literal"><span class="pre">list</span></code>, <code class="docutils literal"><span class="pre">tuple</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – see <code class="docutils literal"><span class="pre">OpeniInterface().options('rankby')</span></code> for valid values.</li>
<li><strong>article_type</strong> (<code class="docutils literal"><span class="pre">str</span></code>, <code class="docutils literal"><span class="pre">list</span></code>, <code class="docutils literal"><span class="pre">tuple</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – see <code class="docutils literal"><span class="pre">OpeniInterface().options('article_type')</span></code> for valid values.</li>
<li><strong>subset</strong> (<code class="docutils literal"><span class="pre">str</span></code>, <code class="docutils literal"><span class="pre">list</span></code>, <code class="docutils literal"><span class="pre">tuple</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – see <code class="docutils literal"><span class="pre">OpeniInterface().options('subset')</span></code> for valid values.</li>
<li><strong>collection</strong> (<code class="docutils literal"><span class="pre">str</span></code>, <code class="docutils literal"><span class="pre">list</span></code>, <code class="docutils literal"><span class="pre">tuple</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – see <code class="docutils literal"><span class="pre">OpeniInterface().options('collection')</span></code> for valid values.</li>
<li><strong>fields</strong> (<code class="docutils literal"><span class="pre">str</span></code>, <code class="docutils literal"><span class="pre">list</span></code>, <code class="docutils literal"><span class="pre">tuple</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – see <code class="docutils literal"><span class="pre">OpeniInterface().options('fields')</span></code> for valid values.</li>
<li><strong>specialties</strong> (<code class="docutils literal"><span class="pre">str</span></code>, <code class="docutils literal"><span class="pre">list</span></code>, <code class="docutils literal"><span class="pre">tuple</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – see <code class="docutils literal"><span class="pre">OpeniInterface().options('specialties')</span></code> for valid values.</li>
<li><strong>video</strong> (<code class="docutils literal"><span class="pre">str</span></code>, <code class="docutils literal"><span class="pre">list</span></code>, <code class="docutils literal"><span class="pre">tuple</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – see <code class="docutils literal"><span class="pre">OpeniInterface().options('video')</span></code> for valid values.</li>
<li><strong>exclusions</strong> (<code class="docutils literal"><span class="pre">list</span></code>, <code class="docutils literal"><span class="pre">tuple</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – <p>one or both of: ‘graphics’, ‘multipanel’. Defaults to <code class="docutils literal"><span class="pre">['graphics']</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Excluding ‘multipanel’ can result in images that <em>are</em> multipanel
being returned from Open-i API. For this reason, including ‘multipanel’
is not currently recommended.</p>
</div>
</li>
<li><strong>print_results</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code>, print the number of search results.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If passing a single option to <code class="docutils literal"><span class="pre">image_type</span></code>, <code class="docutils literal"><span class="pre">rankby</span></code>, <code class="docutils literal"><span class="pre">article_type</span></code>, <code class="docutils literal"><span class="pre">subset</span></code>,
<code class="docutils literal"><span class="pre">collection</span></code>, <code class="docutils literal"><span class="pre">fields</span></code>, <code class="docutils literal"><span class="pre">specialties</span></code> or <code class="docutils literal"><span class="pre">video</span></code>, a string can be used, e.g.,
<code class="docutils literal"><span class="pre">...image_type='ct')</span></code>. For multiple values, a list or tuple must be used, e.g.,
<code class="docutils literal"><span class="pre">...image_type=('ct',</span> <span class="pre">'mri')</span></code>.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="biovida.images.openi_interface.OpeniInterface.pull">
<code class="descname">pull</code><span class="sig-paren">(</span><em>image_size=’large’</em>, <em>records_sleep_time=(10</em>, <em>1.5)</em>, <em>images_sleep_time=(10</em>, <em>1.5)</em>, <em>download_limit=100</em>, <em>clinical_cases_only=False</em>, <em>use_image_caption=False</em>, <em>new_records_pull=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/openi_interface.html#OpeniInterface.pull"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.openi_interface.OpeniInterface.pull" title="Permalink to this definition">¶</a></dt>
<dd><p>Pull (i.e., download) the current search.</p>
<p>In addition to the columns provided by Open-i, this method will automatically generate the
following columns by analyzing the pulled data:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">'age'</span></code></li>
<li><code class="docutils literal"><span class="pre">'sex'</span></code></li>
<li><code class="docutils literal"><span class="pre">'ethnicity'</span></code></li>
<li><code class="docutils literal"><span class="pre">'diagnosis'</span></code></li>
<li><code class="docutils literal"><span class="pre">'parsed_abstract'</span></code></li>
<li>duration of illness (<code class="docutils literal"><span class="pre">'illness_duration_years'</span></code>)</li>
<li>the imaging modality (e.g., MRI) used, based on the text associated with the image (<code class="docutils literal"><span class="pre">'imaging_modality_from_text'</span></code>)</li>
<li>the plane (‘axial’, ‘coronal’ or ‘sagittal’) of the image (<code class="docutils literal"><span class="pre">'image_plane'</span></code>)</li>
<li>image problems (‘arrows’, ‘asterisks’ and ‘grids’) inferred from the image caption (<code class="docutils literal"><span class="pre">'image_problems_from_text'</span></code>)</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The ‘parsed_abstract’ column contains abstracts coerced into dictionaries where the subheadings of the abstract
form the keys and their associated information form the values. For example, a <em>MedPix</em> image will typically yield
a dictionary with the following keys: ‘history’, ‘finding’, ‘ddx’ (differential diagnosis), ‘dxhow’ and ‘exam’.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><em>MedPix</em> images include a distinct ‘diagnosis’ section. For images from other sources, the <code class="docutils literal"><span class="pre">'diagnosis'</span></code>
column is obtained by analyzing the text associated with the image. This analysis could produce inaccuracies.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>image_size</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – <dl class="docutils">
<dt>one of: ‘large’, ‘grid150’, ‘thumb’, ‘thumb_large’ or <code class="docutils literal"><span class="pre">None</span></code>. Defaults to ‘large’.</dt>
<dd>If <code class="docutils literal"><span class="pre">None</span></code>, no attempt will be made to download images.</dd>
</dl>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The analyses performed by the <code class="docutils literal"><span class="pre">image_processing.OpeniImageProcessing</span></code> class are
most accurate with large images.</p>
</div>
</li>
<li><strong>records_sleep_time</strong> (<code class="docutils literal"><span class="pre">tuple</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – tuple of the form: <code class="docutils literal"><span class="pre">(every</span> <span class="pre">x</span> <span class="pre">downloads,</span> <span class="pre">period</span> <span class="pre">of</span> <span class="pre">time</span> <span class="pre">[seconds])</span></code>. Defaults to <code class="docutils literal"><span class="pre">(10,</span> <span class="pre">1.5)</span></code>.
Note: noise is randomly added to the sleep time by sampling from a normal distribution
(with mean = 0, sd = 0.75).</li>
<li><strong>images_sleep_time</strong> (<code class="docutils literal"><span class="pre">tuple</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – tuple of the form: <code class="docutils literal"><span class="pre">(every</span> <span class="pre">x</span> <span class="pre">downloads,</span> <span class="pre">period</span> <span class="pre">of</span> <span class="pre">time</span> <span class="pre">[seconds])</span></code>. Defaults to <code class="docutils literal"><span class="pre">(10,</span> <span class="pre">1.5)</span></code>.
Note: noise is randomly added to the sleep time by sampling from a normal distribution
(with mean = 0, sd = 0.75).</li>
<li><strong>download_limit</strong> (<code class="docutils literal"><span class="pre">None</span></code> or <code class="docutils literal"><span class="pre">int</span></code>) – max. number of results to download. If <code class="docutils literal"><span class="pre">None</span></code>, no limit will be imposed
(not recommended). Defaults to 100.</li>
<li><strong>clinical_cases_only</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – <dl class="docutils">
<dt>if <code class="docutils literal"><span class="pre">True</span></code> require that the data harvested is of a clinical case. Specifically,</dt>
<dd>this parameter requires that ‘article_type’ is one of: ‘encounter’, ‘case_report’.
Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If <code class="docutils literal"><span class="pre">True</span></code>, this parameter will often result in fewer records being returned than
the <code class="docutils literal"><span class="pre">download_limit</span></code>.</p>
</div>
</li>
<li><strong>use_image_caption</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code> block downloading of an image if its caption suggests the presence
of problematic image properties (e.g., ‘arrows’) likely to corrupt a dataset.
Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>new_records_pull</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – <p>if <code class="docutils literal"><span class="pre">True</span></code>, download the data for the current search. If <code class="docutils literal"><span class="pre">False</span></code>, use <code class="docutils literal"><span class="pre">INSTANCE.records_db</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Setting <code class="docutils literal"><span class="pre">new_records_pull=False</span></code> can be useful if one wishes to initially set <code class="docutils literal"><span class="pre">image_size=None</span></code>,
truncate or otherwise modify <code class="docutils literal"><span class="pre">INSTANCE.records_db</span></code> and then download images.</p>
</div>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">a DataFrame with the record information.
If <code class="docutils literal"><span class="pre">image_size</span></code> is not None, images will also be harvested and cached.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><code class="docutils literal"><span class="pre">Pandas</span> <span class="pre">DataFrame</span></code></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><strong>ValueError</strong> – if <code class="docutils literal"><span class="pre">search()</span></code> has not been called.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-biovida.images.cancer_image_interface">
<span id="biovida-images-cancer-image-interface-module"></span><h2>biovida.images.cancer_image_interface module<a class="headerlink" href="#module-biovida.images.cancer_image_interface" title="Permalink to this headline">¶</a></h2>
<div class="section" id="cancer-imaging-archive-interface">
<h3>Cancer Imaging Archive Interface<a class="headerlink" href="#cancer-imaging-archive-interface" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="biovida.images.cancer_image_interface.CancerImageInterface">
<em class="property">class </em><code class="descclassname">biovida.images.cancer_image_interface.</code><code class="descname">CancerImageInterface</code><span class="sig-paren">(</span><em>api_key</em>, <em>cache_path=None</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/cancer_image_interface.html#CancerImageInterface"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.cancer_image_interface.CancerImageInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Python Interface for the <a class="reference external" href="http://www.cancerimagingarchive.net/">Cancer Imaging Archive</a>’s API.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>api_key</strong> (<code class="docutils literal"><span class="pre">str</span></code>) – <p>a key to the the Cancer Imaging Archive’s API.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">An API key can be obtained by following the instructions provided <a class="reference external" href="https://wiki.cancerimagingarchive.net/display/Public/TCIA+Programmatic+Interface+%28REST+API%29+Usage+Guide/">here</a>.</p>
</div>
</li>
<li><strong>cache_path</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – path to the location of the BioVida cache. If a cache does not exist in this location,
one will created. Default to <code class="docutils literal"><span class="pre">None</span></code>, which will generate a cache in the home folder.</li>
<li><strong>verbose</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code> print additional details</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If you wish to use any data obtained from this resource for any form of publication,
you must follow the citation guidelines provided by the study’s authors on the project’s
Cancer Imaging Archive repository page.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Several studies on the Cancer Imaging Archive are subject to publication blockades.
Therefore, if you intend to publish any findings which use data from this resource, you
must first check that the studies you have selected are not subject to such restrictions.</p>
</div>
<dl class="method">
<dt id="biovida.images.cancer_image_interface.CancerImageInterface.save_records_db">
<code class="descname">save_records_db</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/cancer_image_interface.html#CancerImageInterface.save_records_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.cancer_image_interface.CancerImageInterface.save_records_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the current <code class="docutils literal"><span class="pre">records_db</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<code class="docutils literal"><span class="pre">str</span></code>) – a system path ending with the ‘.p’ file extension.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.images.cancer_image_interface.CancerImageInterface.load_records_db">
<code class="descname">load_records_db</code><span class="sig-paren">(</span><em>records_db</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/cancer_image_interface.html#CancerImageInterface.load_records_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.cancer_image_interface.CancerImageInterface.load_records_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a <code class="docutils literal"><span class="pre">records_db</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>records_db</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">Pandas</span> <span class="pre">DataFrame</span></code>) – a system path or <code class="docutils literal"><span class="pre">records_db</span></code> itself.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="biovida.images.cancer_image_interface.CancerImageInterface.records_db_short">
<code class="descname">records_db_short</code><a class="headerlink" href="#biovida.images.cancer_image_interface.CancerImageInterface.records_db_short" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <cite>records_db</cite> with nonessential columns removed.</p>
</dd></dl>

<dl class="attribute">
<dt id="biovida.images.cancer_image_interface.CancerImageInterface.cache_records_db_short">
<code class="descname">cache_records_db_short</code><a class="headerlink" href="#biovida.images.cancer_image_interface.CancerImageInterface.cache_records_db_short" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <cite>cache_records_db</cite> with nonessential columns removed.</p>
</dd></dl>

<dl class="method">
<dt id="biovida.images.cancer_image_interface.CancerImageInterface.update_collections">
<code class="descname">update_collections</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/cancer_image_interface.html#CancerImageInterface.update_collections"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.cancer_image_interface.CancerImageInterface.update_collections" title="Permalink to this definition">¶</a></dt>
<dd><p>Refresh the list of collections provided by the Cancer Imaging Archive.</p>
</dd></dl>

<dl class="method">
<dt id="biovida.images.cancer_image_interface.CancerImageInterface.search">
<code class="descname">search</code><span class="sig-paren">(</span><em>collection=None</em>, <em>cancer_type=None</em>, <em>location=None</em>, <em>modality=None</em>, <em>download_override=False</em>, <em>pretty_print=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/cancer_image_interface.html#CancerImageInterface.search"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.cancer_image_interface.CancerImageInterface.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to Search for studies on the Cancer Imaging Archive.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>collection</strong> (<code class="docutils literal"><span class="pre">list</span></code>, <code class="docutils literal"><span class="pre">tuple</span></code>, <code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – a collection (study), or iterable (e.g., list) of collections,
hosted by the Cancer Imaging Archive. Defaults to <code class="docutils literal"><span class="pre">None</span></code>.</li>
<li><strong>cancer_type</strong> (<code class="docutils literal"><span class="pre">str</span></code>, <code class="docutils literal"><span class="pre">iterable</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – a string or list/tuple of specifying cancer types. Defaults to <code class="docutils literal"><span class="pre">None</span></code>.</li>
<li><strong>location</strong> (<code class="docutils literal"><span class="pre">str</span></code>, <code class="docutils literal"><span class="pre">iterable</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – a string or list/tuple of specifying body locations. Defaults to <code class="docutils literal"><span class="pre">None</span></code>.</li>
<li><strong>modality</strong> (<code class="docutils literal"><span class="pre">str</span></code>, <code class="docutils literal"><span class="pre">iterable</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – the type of imaging technology. See: <code class="docutils literal"><span class="pre">CancerImageInterface().dicom_modality_abbrevs</span></code> for
valid values. Defaults to <code class="docutils literal"><span class="pre">None</span></code>.</li>
<li><strong>download_override</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – If <code class="docutils literal"><span class="pre">True</span></code>, override any existing database currently cached and download a new one.
Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>pretty_print</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code>, pretty print the search results. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">a dataframe containing the search results.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><code class="docutils literal"><span class="pre">Pandas</span> <span class="pre">DataFrame</span></code></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CancerImageInterface</span><span class="p">(</span><span class="n">YOUR_API_KEY_HERE</span><span class="p">)</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">cancer_type</span><span class="o">=</span><span class="s1">&#39;carcinoma&#39;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;head&#39;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">   collection                   cancer_type                          modalities         subjects    location</span>
<span class="go">0  TCGA-HNSC            Head and Neck Squamous Cell Carcinoma  CT, MR, PT                 164     [Head, Neck]</span>
<span class="go">1  QIN-HeadNeck         Head and Neck Carcinomas               PT, CT, SR, SEG, RWV       156     [Head, Neck]</span>
<span class="go">      ...                          ...                                  ...               ...         ...</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="biovida.images.cancer_image_interface.CancerImageInterface.extract_dicom_data">
<code class="descname">extract_dicom_data</code><span class="sig-paren">(</span><em>database=’records_db’</em>, <em>make_hashable=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/cancer_image_interface.html#CancerImageInterface.extract_dicom_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.cancer_image_interface.CancerImageInterface.extract_dicom_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract data from all dicom files referenced in <code class="docutils literal"><span class="pre">records_db</span></code> or <code class="docutils literal"><span class="pre">cache_records_db</span></code>.
Note: this requires that <code class="docutils literal"><span class="pre">save_dicom</span></code> is <code class="docutils literal"><span class="pre">True</span></code> when <code class="docutils literal"><span class="pre">pull()</span></code> is called.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>database</strong> (<code class="docutils literal"><span class="pre">str</span></code>) – the name of the database to use. Must be one of: ‘records_db’, ‘cache_records_db’.
Defaults to ‘records_db’.</li>
<li><strong>make_hashable</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – If <code class="docutils literal"><span class="pre">True</span></code> convert the data extracted to nested tuples.
If <code class="docutils literal"><span class="pre">False</span></code> generate nested dictionaries. Defaults to <code class="docutils literal"><span class="pre">False</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">a series of the dicom data with dictionaries of the form <code class="docutils literal"><span class="pre">{path:</span> <span class="pre">{DICOM</span> <span class="pre">Description:</span> <span class="pre">value,</span> <span class="pre">...},</span> <span class="pre">...}</span></code>.
If <code class="docutils literal"><span class="pre">make_hashable</span></code> is <code class="docutils literal"><span class="pre">True</span></code>, all dictionaries will be converted to <code class="docutils literal"><span class="pre">tuples</span></code>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">Pandas</span> <span class="pre">Series</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.images.cancer_image_interface.CancerImageInterface.pull">
<code class="descname">pull</code><span class="sig-paren">(</span><em>patient_limit=3</em>, <em>session_limit=1</em>, <em>collections_limit=None</em>, <em>allowed_modalities=None</em>, <em>save_dicom=True</em>, <em>save_png=False</em>, <em>new_records_pull=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/cancer_image_interface.html#CancerImageInterface.pull"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.cancer_image_interface.CancerImageInterface.pull" title="Permalink to this definition">¶</a></dt>
<dd><p>Pull (i.e., download) the current search.</p>
<p>Notes:</p>
<ul>
<li><p class="first">When <code class="docutils literal"><span class="pre">save_png</span></code> is <code class="docutils literal"><span class="pre">True</span></code>, 3D DICOM images are saved as individual frames.</p>
</li>
<li><p class="first">PNG file names in the cache adhere to the following format:</p>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">[instance,</span> <span class="pre">pull_position]__[patient_id_[Last</span> <span class="pre">10</span> <span class="pre">Digits</span> <span class="pre">of</span> <span class="pre">SeriesInstanceUID]]__[Image</span> <span class="pre">Scale</span> <span class="pre">('default')].png</span></code></p>
</div></blockquote>
</li>
<li><p class="first">DICOM file names in the cache adhere to the following format:</p>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">[instance,</span> <span class="pre">original_name_in_source_file]__[patient_id_[Last</span> <span class="pre">10</span> <span class="pre">Digits</span> <span class="pre">of</span> <span class="pre">SeriesInstanceUID]].dcm</span></code></p>
</div></blockquote>
</li>
</ul>
<p>where:</p>
<table class="hlist"><tr><td><ul class="simple">
<li>‘instance’ denotes the image’s position in the 3D image (if applicable and available)</li>
<li>‘pull_position’ denotes the position of the image in the set returned for the given ‘SeriesInstanceUID’ by the Cancer Imaging Archive.</li>
</ul>
</td></tr></table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>patient_limit</strong> (<code class="docutils literal"><span class="pre">int</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – limit on the number of patients to extract.
Patient IDs are sorted prior to this limit being imposed.
If <code class="docutils literal"><span class="pre">None</span></code>, no patient_limit will be imposed. Defaults to <cite>3</cite>.</li>
<li><strong>session_limit</strong> (<code class="docutils literal"><span class="pre">int</span></code>) – <dl class="docutils">
<dt>restrict image harvesting to the first <code class="docutils literal"><span class="pre">n</span></code> imaging sessions (days) for a given patient,</dt>
<dd>where <code class="docutils literal"><span class="pre">n</span></code> is the value passed to this parameter. If <code class="docutils literal"><span class="pre">None</span></code>, no limit will be imposed.
Defaults to <cite>1</cite>.</dd>
</dl>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Several studies (collections) in the Cancer Imaging Archive database have multiple imaging sessions.
Latter sessions may be of patients following interventions, such as surgery, intended to
<em>eliminate</em> cancerous tissue. For this reason it cannot be assumed that images obtained from
non-baseline sessions (i.e., session number &gt; 1) contain signs of disease.</p>
</div>
</li>
<li><strong>collections_limit</strong> (<code class="docutils literal"><span class="pre">int</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – limit the number of collections to download. If <code class="docutils literal"><span class="pre">None</span></code>, no limit will be applied.
Defaults to <code class="docutils literal"><span class="pre">None</span></code>.</li>
<li><strong>allowed_modalities</strong> (<code class="docutils literal"><span class="pre">list</span></code> or <code class="docutils literal"><span class="pre">tuple</span></code>) – limit images downloaded to certain modalities.
See: <code class="docutils literal"><span class="pre">CancerImageInterface(YOUR_API_KEY_HERE).dicom_modality_abbrevs</span></code> (use the keys).
Note: ‘MRI’, ‘PET’, ‘CT’ and ‘X-Ray’ can also be used.
This parameter is not case sensitive. Defaults to <code class="docutils literal"><span class="pre">None</span></code>.</li>
<li><strong>save_dicom</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code>, save the DICOM images provided by The Cancer Imaging Archive ‘as is’. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
<li><strong>save_png</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code>, convert the DICOM images provided by The Cancer Imaging Archive to PNGs. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>new_records_pull</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code>, download the data for the current search. If <code class="docutils literal"><span class="pre">False</span></code>, use <code class="docutils literal"><span class="pre">INSTANCE.records_db</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">a DataFrame with the record information.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">Pandas</span> <span class="pre">DataFrame</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-biovida.images.image_processing">
<span id="biovida-images-image-processing-module"></span><h2>biovida.images.image_processing module<a class="headerlink" href="#module-biovida.images.image_processing" title="Permalink to this headline">¶</a></h2>
<div class="section" id="image-processing">
<h3>Image Processing<a class="headerlink" href="#image-processing" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="biovida.images.image_processing.OpeniImageProcessing">
<em class="property">class </em><code class="descclassname">biovida.images.image_processing.</code><code class="descname">OpeniImageProcessing</code><span class="sig-paren">(</span><em>instance</em>, <em>db_to_extract=’records_db’</em>, <em>model_location=None</em>, <em>download_override=False</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/image_processing.html#OpeniImageProcessing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.image_processing.OpeniImageProcessing" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>This class is designed to allow easy analysis and cleaning of cached Open-i image data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>instance</strong> (<code class="docutils literal"><span class="pre">OpenInterface</span> <span class="pre">Class</span></code>) – an instance of the <code class="docutils literal"><span class="pre">biovida.images.openi_interface.OpenInterface()</span></code> class.</li>
<li><strong>db_to_extract</strong> (<code class="docutils literal"><span class="pre">str</span></code>) – <code class="docutils literal"><span class="pre">records_db</span></code> or“cache_records_db“. Defaults to ‘records_db’.</li>
<li><strong>model_location</strong> (<code class="docutils literal"><span class="pre">str</span></code>) – the location of the model for Convnet.
If <cite>None</cite>, the default model will be used. Defaults to <code class="docutils literal"><span class="pre">None</span></code>.</li>
<li><strong>download_override</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – If <code class="docutils literal"><span class="pre">True</span></code>, download a new copy of the ‘visual_image_problems_model’ weights (and
associated resources) regardless of whether or not files with these names are
already cached. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>verbose</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code>, print additional details. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Variables:</th><td class="field-body"><p class="first last"><strong>image_dataframe</strong> – this is the dataframe that was passed when instantiating the class and
contains a cache of all analyses run as new columns.</p>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="biovida.images.image_processing.OpeniImageProcessing.image_dataframe_short">
<code class="descname">image_dataframe_short</code><a class="headerlink" href="#biovida.images.image_processing.OpeniImageProcessing.image_dataframe_short" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <cite>image_dataframe</cite> with nonessential columns removed.</p>
</dd></dl>

<dl class="method">
<dt id="biovida.images.image_processing.OpeniImageProcessing.grayscale_analysis">
<code class="descname">grayscale_analysis</code><span class="sig-paren">(</span><em>new_analysis=False</em>, <em>status=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/image_processing.html#OpeniImageProcessing.grayscale_analysis"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.image_processing.OpeniImageProcessing.grayscale_analysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Analyze the images to determine whether or not they are grayscale
(uses the PIL image library).</p>
<dl class="docutils">
<dt>Note:</dt>
<dd><ul class="first last simple">
<li>this tool is very conservative (very small amounts of ‘color’ will yield <cite>False</cite>).</li>
<li>the exception to the above rule is the <em>very rare</em> case of an image which an even split
of red, green and blue. In such an instance this function may errounously conclude that
the image is grayscale.</li>
</ul>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>new_analysis</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – rerun the analysis if it has already been computed. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>status</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – display status bar. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.images.image_processing.OpeniImageProcessing.logo_analysis">
<code class="descname">logo_analysis</code><span class="sig-paren">(</span><em>match_quality_threshold=0.25</em>, <em>xy_position_threshold=(0.3333333333333333</em>, <em>0.4)</em>, <em>base_resizes=(0.5</em>, <em>2.5</em>, <em>0.1)</em>, <em>end_search_threshold=0.875</em>, <em>base_image_cropping=(0.15</em>, <em>0.5)</em>, <em>new_analysis=False</em>, <em>status=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/image_processing.html#OpeniImageProcessing.logo_analysis"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.image_processing.OpeniImageProcessing.logo_analysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for the MedPix Logo. If located, with match quality above match_quality_threshold,
populate the the ‘medpix_logo_bounding_box’ of <code class="docutils literal"><span class="pre">image_dataframe</span></code> with its bounding box.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>match_quality_threshold</strong> (<code class="docutils literal"><span class="pre">float</span></code>) – the minimum match quality required to accept the match.
See: <code class="docutils literal"><span class="pre">skimage.feature.match_template()</span></code> for more information.</li>
<li><strong>xy_position_threshold</strong> (<code class="docutils literal"><span class="pre">tuple</span></code>) – tuple of the form: (x_greater_check, y_greater_check).
For instance the default (<code class="docutils literal"><span class="pre">(1/3.0,</span> <span class="pre">1/2.5)</span></code>) requires that the
x position of the logo is greater than 1/3 of the image’s width
and less than 1/2.5 of the image’s height.</li>
<li><strong>base_resizes</strong> (<code class="docutils literal"><span class="pre">tuple</span></code>) – See: <code class="docutils literal"><span class="pre">biovida.images.models.template_matching.robust_match_template()</span></code>.</li>
<li><strong>end_search_threshold</strong> (<code class="docutils literal"><span class="pre">float</span></code>) – See: <code class="docutils literal"><span class="pre">biovida.images.models.template_matching.robust_match_template()</span></code>.</li>
<li><strong>base_image_cropping</strong> (<code class="docutils literal"><span class="pre">tuple</span></code>) – See: <code class="docutils literal"><span class="pre">biovida.images.models.template_matching.robust_match_template()</span></code></li>
<li><strong>new_analysis</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – rerun the analysis if it has already been computed.</li>
<li><strong>status</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – display status bar. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.images.image_processing.OpeniImageProcessing.border_analysis">
<code class="descname">border_analysis</code><span class="sig-paren">(</span><em>signal_strength_threshold=0.25</em>, <em>min_border_separation=0.15</em>, <em>lower_bar_search_space=0.9</em>, <em>new_analysis=False</em>, <em>status=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/image_processing.html#OpeniImageProcessing.border_analysis"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.image_processing.OpeniImageProcessing.border_analysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for <code class="docutils literal"><span class="pre">biovida.images.models.border_detection.border_detection()</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>signal_strength_threshold</strong> (<code class="docutils literal"><span class="pre">float</span></code>) – see <code class="docutils literal"><span class="pre">biovida.images.models.border_detection()</span></code>.</li>
<li><strong>min_border_separation</strong> (<code class="docutils literal"><span class="pre">float</span></code>) – see <code class="docutils literal"><span class="pre">biovida.images.models.border_detection()</span></code>.</li>
<li><strong>lower_bar_search_space</strong> (<code class="docutils literal"><span class="pre">float</span></code>) – see <code class="docutils literal"><span class="pre">biovida.images.models.border_detection()</span></code>.</li>
<li><strong>new_analysis</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – rerun the analysis if it has already been computed. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>status</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – display status bar. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.images.image_processing.OpeniImageProcessing.crop_decision">
<code class="descname">crop_decision</code><span class="sig-paren">(</span><em>new_analysis=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/image_processing.html#OpeniImageProcessing.crop_decision"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.image_processing.OpeniImageProcessing.crop_decision" title="Permalink to this definition">¶</a></dt>
<dd><p>Decide where to crop the images, if at all.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>new_analysis</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – rerun the analysis if it has already been computed. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.images.image_processing.OpeniImageProcessing.visual_image_problems">
<code class="descname">visual_image_problems</code><span class="sig-paren">(</span><em>limit_to_known_modalities=True</em>, <em>new_analysis=False</em>, <em>status=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/image_processing.html#OpeniImageProcessing.visual_image_problems"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.image_processing.OpeniImageProcessing.visual_image_problems" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is powered by a Convolutional Neural Network which
computes probabilities for the presence of problematic image properties or types.</p>
<p>Currently, the model can identify the follow problems:</p>
<ul class="simple">
<li>arrows in images</li>
<li>images arrayed as grids</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>limit_to_known_modalities</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code>, remove model predicts for image modalities
the model has not explicitly been trained on. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
<li><strong>new_analysis</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – rerun the analysis if it has already been computed. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>status</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – display status bar. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Examples:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">DataFrame</span><span class="p">[</span><span class="s1">&#39;visual_image_problems&#39;</span><span class="p">]</span>
<span class="gp">...</span>
<span class="go">0 [(&#39;valid_image&#39;, 0.82292306), (&#39;text&#39;, 0.13276383), (&#39;arrows&#39;, 0.10139297), (&#39;grids&#39;, 0.021935554)]</span>
<span class="go">1 [(&#39;valid_image&#39;, 0.76374823), (&#39;arrows&#39;, 0.1085605), (&#39;grids&#39;, 0.0024915827), (&#39;text&#39;, 0.00037114936)]</span>
<span class="go">2 [(&#39;valid_image&#39;, 0.84319711), (&#39;text&#39;, 0.10483728), (&#39;arrows&#39;, 0.06458132), (&#39;grids&#39;, 0.0125442)]</span>
<span class="go">3 [(&#39;valid_image&#39;, 0.84013706), (&#39;arrows&#39;, 0.090836897), (&#39;text&#39;, 0.055015128), (&#39;grids&#39;, 0.0088913934)]</span>
</pre></div>
</div>
<p>The first value in the tuple represents the problem identified and second
value represents its associated probability.</p>
</dd></dl>

<dl class="method">
<dt id="biovida.images.image_processing.OpeniImageProcessing.auto_analysis">
<code class="descname">auto_analysis</code><span class="sig-paren">(</span><em>limit_to_known_modalities=True</em>, <em>new_analysis=False</em>, <em>status=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/image_processing.html#OpeniImageProcessing.auto_analysis"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.image_processing.OpeniImageProcessing.auto_analysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Automatically use the class methods to analyze the <code class="docutils literal"><span class="pre">image_dataframe</span></code> using default
parameter values for class methods.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>limit_to_known_modalities</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code>, remove model predicts for image modalities
the model has not explicitly been trained on. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
<li><strong>new_analysis</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – rerun the analysis if it has already been computed. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>status</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – display status bar. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.images.image_processing.OpeniImageProcessing.auto_decision">
<code class="descname">auto_decision</code><span class="sig-paren">(</span><em>valid_floor=0.8</em>, <em>problems_to_ignore=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/image_processing.html#OpeniImageProcessing.auto_decision"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.image_processing.OpeniImageProcessing.auto_decision" title="Permalink to this definition">¶</a></dt>
<dd><p>Automatically generate ‘invalid_image’ column in the <cite>image_dataframe</cite>
column by deciding whether or not images are valid using default parameter values for class methods.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>valid_floor</strong> (<code class="docutils literal"><span class="pre">float</span></code>) – <p>the smallest value needed for a ‘valid_image’ to be considered valid. Defaults to <cite>0.8</cite>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For an image to be considered ‘valid’, the most likely categorization for the image must be
‘valid_image’ and the probability that the model assigns when placing it in this category
must be great than or equal to <code class="docutils literal"><span class="pre">valid_floor</span></code>.</p>
</div>
</li>
<li><strong>problems_to_ignore</strong> (<code class="docutils literal"><span class="pre">None</span></code>, <code class="docutils literal"><span class="pre">list</span></code> or <code class="docutils literal"><span class="pre">tuple</span></code>) – image problems to ignore. See <code class="docutils literal"><span class="pre">INSTANCE.known_image_problems</span></code> for valid values.
Defaults to <code class="docutils literal"><span class="pre">None</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.images.image_processing.OpeniImageProcessing.auto">
<code class="descname">auto</code><span class="sig-paren">(</span><em>valid_floor=0.8</em>, <em>limit_to_known_modalities=True</em>, <em>problems_to_ignore=None</em>, <em>new_analysis=False</em>, <em>status=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/image_processing.html#OpeniImageProcessing.auto"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.image_processing.OpeniImageProcessing.auto" title="Permalink to this definition">¶</a></dt>
<dd><p>Automatically carry out all aspects of image preprocessing (recommended).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>valid_floor</strong> (<code class="docutils literal"><span class="pre">float</span></code>) – the smallest value needed for a ‘valid_image’ to be considered valid. Defaults to <cite>0.8</cite>.</li>
<li><strong>limit_to_known_modalities</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code>, remove model predicts for image modalities
the model has not explicitly been trained on. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
<li><strong>problems_to_ignore</strong> (<code class="docutils literal"><span class="pre">None</span></code>, <code class="docutils literal"><span class="pre">list</span></code> or <code class="docutils literal"><span class="pre">tuple</span></code>) – image problems to ignore. See <code class="docutils literal"><span class="pre">INSTANCE.known_image_problems</span></code> for valid values.
Defaults to <code class="docutils literal"><span class="pre">None</span></code>.</li>
<li><strong>new_analysis</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – rerun the analysis if it has already been computed. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>status</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – display status bar. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">the <cite>image_dataframe</cite>, complete with the results of all possible analyses
(using default parameter values).</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">Pandas</span> <span class="pre">DataFrame</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.images.image_processing.OpeniImageProcessing.clean_image_dataframe">
<code class="descname">clean_image_dataframe</code><span class="sig-paren">(</span><em>crop_images=True</em>, <em>convert_to_rgb=False</em>, <em>status=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/image_processing.html#OpeniImageProcessing.clean_image_dataframe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.image_processing.OpeniImageProcessing.clean_image_dataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Define a dataframe with rows of images found to be ‘valid’.
These ‘valid’ images are cleaned and stored as PIL images in a <code class="docutils literal"><span class="pre">'cleaned_image'</span></code> column.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The DataFrame this method creates can be viewed with <code class="docutils literal"><span class="pre">INSTANCE.image_dataframe_cleaned</span></code>.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>crop_images</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – Crop the images using analyses results from <cite>border_analysis()</cite> and
<code class="docutils literal"><span class="pre">logo_analysis()</span></code>. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
<li><strong>convert_to_rgb</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code>, use the PIL library to convert the images to RGB. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>status</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – display status bar. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><code class="docutils literal"><span class="pre">self.image_dataframe</span></code> where the ‘invalid_image’ column is <code class="docutils literal"><span class="pre">True</span></code>, with the addition of
a ‘cleaned_image’ populated by PIL image to be saved to disk.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">Pandas</span> <span class="pre">DataFrame</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.images.image_processing.OpeniImageProcessing.output">
<code class="descname">output</code><span class="sig-paren">(</span><em>output_rule</em>, <em>create_dirs=False</em>, <em>allow_overwrite=True</em>, <em>action=’copy’</em>, <em>status=True</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/image_processing.html#OpeniImageProcessing.output"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.image_processing.OpeniImageProcessing.output" title="Permalink to this definition">¶</a></dt>
<dd><p>Save processed images to disk.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>output_rule</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">func</span></code>) – <ul>
<li>if a <code class="docutils literal"><span class="pre">str</span></code>: the directory to save the images.</li>
<li>if a <code class="docutils literal"><span class="pre">function</span></code>: it must (1) accept a single parameter (argument) and (2) return system path(s)
[see example below].</li>
</ul>
</li>
<li><strong>create_dirs</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code>, create directories returned by <code class="docutils literal"><span class="pre">divvy_rule</span></code> if they do not exist.
Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>allow_overwrite</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code> allow existing images to be overwritten. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
<li><strong>action</strong> (<code class="docutils literal"><span class="pre">str</span></code>) – one of ‘copy’, ‘ndarray’.</li>
<li><strong>status</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – display status bar. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">biovida.images</span> <span class="k">import</span> <span class="n">OpeniInterface</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">biovida.images</span> <span class="k">import</span> <span class="n">OpeniImageProcessing</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opi</span> <span class="o">=</span> <span class="n">OpeniInterface</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opi</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">image_type</span><span class="o">=</span><span class="s1">&#39;mri&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opi</span><span class="o">.</span><span class="n">pull</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ip</span> <span class="o">=</span> <span class="n">OpeniImageProcessing</span><span class="p">(</span><span class="n">opi</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ip</span><span class="o">.</span><span class="n">auto</span><span class="p">()</span>
</pre></div>
</div>
<p>Next, prune invalid images</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ip</span><span class="o">.</span><span class="n">clean_image_dataframe</span><span class="p">()</span>
</pre></div>
</div>
<p>A Simple Output Rule</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ip</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="s1">&#39;/your/path/here/images&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>A More Complex Output Rule</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_save_rule</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;abstract&#39;</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="s1">&#39;lung&#39;</span> <span class="ow">in</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;abstract&#39;</span><span class="p">]:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">return</span> <span class="s1">&#39;/your/path/here/lung_images&#39;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;abstract&#39;</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="s1">&#39;heart&#39;</span> <span class="ow">in</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;abstract&#39;</span><span class="p">]:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">return</span> <span class="s1">&#39;/your/path/here/heart_images&#39;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ip</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">my_save_rule</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="biovida-images-models-image-classification-module">
<h2>biovida.images.models.image_classification module<a class="headerlink" href="#biovida-images-models-image-classification-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-biovida.images.models.template_matching">
<span id="biovida-images-models-template-matching-module"></span><h2>biovida.images.models.template_matching module<a class="headerlink" href="#module-biovida.images.models.template_matching" title="Permalink to this headline">¶</a></h2>
<div class="section" id="template-matching">
<h3>Template Matching<a class="headerlink" href="#template-matching" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="biovida.images.models.template_matching.robust_match_template">
<code class="descclassname">biovida.images.models.template_matching.</code><code class="descname">robust_match_template</code><span class="sig-paren">(</span><em>pattern_image</em>, <em>base_image</em>, <em>base_resizes=(0.5</em>, <em>2.5</em>, <em>0.1)</em>, <em>end_search_threshold=0.875</em>, <em>base_image_cropping=(0.15</em>, <em>0.5)</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/models/template_matching.html#robust_match_template"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.models.template_matching.robust_match_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for a pattern image in a base image using a algorithm which is robust
against variation in the size of the pattern in the base image.</p>
<p>Method: Fast Normalized Cross-Correlation.</p>
<p>Limitations:</p>
<ul class="simple">
<li>Cropping is limited to the the top left of the base image. The can be circumvented by setting
<code class="docutils literal"><span class="pre">base_image_cropping=(1,</span> <span class="pre">1)</span></code> and cropping <code class="docutils literal"><span class="pre">base_image</span></code> oneself.</li>
<li>This function may become unstable in situations where the pattern image is larger than the base image.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>pattern_image</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">ndarray</span></code>) – <p>the pattern image.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If a <cite>ndarray</cite> is passed to <cite>pattern_image</cite>, it <em>must</em> be preprocessed to be a 2D array,
e.g., <code class="docutils literal"><span class="pre">scipy.misc.imread(pattern_image,</span> <span class="pre">flatten=True)</span></code></p>
</div>
</li>
<li><strong>base_image</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">ndarray</span></code>) – <p>the base image in which to look for the <code class="docutils literal"><span class="pre">pattern_image</span></code>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If a <cite>ndarray</cite> is passed to <cite>base_image</cite>, it <em>must</em> be preprocessed to be a 2D array,
e.g., <code class="docutils literal"><span class="pre">scipy.misc.imread(base_image,</span> <span class="pre">flatten=True)</span></code></p>
</div>
</li>
<li><strong>base_resizes</strong> (<code class="docutils literal"><span class="pre">tuple</span></code>) – the range over which to rescale the base image.Define as a tuple of the
form <code class="docutils literal"><span class="pre">(start,</span> <span class="pre">end,</span> <span class="pre">step</span> <span class="pre">size)</span></code>. Defaults to <code class="docutils literal"><span class="pre">(0.5,</span> <span class="pre">2.0,</span> <span class="pre">0.1)</span></code>.</li>
<li><strong>end_search_threshold</strong> (<code class="docutils literal"><span class="pre">float</span></code> or  <code class="docutils literal"><span class="pre">None</span></code>) – if a match of this quality is found, end the search. Set equal to <code class="docutils literal"><span class="pre">None</span></code> to disable.
Defaults to 0.875.</li>
<li><strong>base_image_cropping</strong> – the amount of the image to crop with respect to the x and y axis.
form: <code class="docutils literal"><span class="pre">(height,</span> <span class="pre">width)</span></code>. Defaults to <code class="docutils literal"><span class="pre">(0.15,</span> <span class="pre">0.5)</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Notes:</p>
<ul class="simple">
<li>Decreasing <code class="docutils literal"><span class="pre">height</span></code> will increase the amount of the lower part of the image removed.</li>
<li>Increasing <code class="docutils literal"><span class="pre">width</span></code> will increase the amount of the image’s left half removed.</li>
<li>Cropping more of the base image reduces the probability that the algorithm getting confused.
However, if the image is cropped too much, the target pattern itself could be removed.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A dictionary of the form: <code class="docutils literal"><span class="pre">{&quot;bounding_box&quot;:</span> <span class="pre">...,</span> <span class="pre">&quot;match_quality&quot;:</span> <span class="pre">...,</span> <span class="pre">&quot;base_image_shape&quot;:</span> <span class="pre">...}</span></code>.<ul class="simple">
<li>bounding_box (<code class="docutils literal"><span class="pre">dict</span></code>): <code class="docutils literal"><span class="pre">{'bottom_right':</span> <span class="pre">(x,</span> <span class="pre">y),</span> <span class="pre">'top_right':</span> <span class="pre">(x,</span> <span class="pre">y),</span> <span class="pre">'top_left':</span> <span class="pre">(x,</span> <span class="pre">y),</span> <span class="pre">'bottom_left':</span> <span class="pre">(x,</span> <span class="pre">y)}</span></code>.</li>
<li>match_quality (<code class="docutils literal"><span class="pre">float</span></code>): quality of the match.</li>
<li>base_image_shape (<code class="docutils literal"><span class="pre">tuple</span></code>): the size of the base image provided. Form: <code class="docutils literal"><span class="pre">(width</span> <span class="pre">(x),</span> <span class="pre">height</span> <span class="pre">(y))</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal"><span class="pre">dict</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="module-biovida.images.models.border_detection">
<span id="biovida-images-models-border-detection-module"></span><h2>biovida.images.models.border_detection module<a class="headerlink" href="#module-biovida.images.models.border_detection" title="Permalink to this headline">¶</a></h2>
<div class="section" id="border-and-edge-detection">
<h3>Border and Edge Detection<a class="headerlink" href="#border-and-edge-detection" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="biovida.images.models.border_detection.edge_detection">
<code class="descclassname">biovida.images.models.border_detection.</code><code class="descname">edge_detection</code><span class="sig-paren">(</span><em>image</em>, <em>axis=0</em>, <em>n_largest_override=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/models/border_detection.html#edge_detection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.models.border_detection.edge_detection" title="Permalink to this definition">¶</a></dt>
<dd><p>Detects edges within an image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>image</strong> (<code class="docutils literal"><span class="pre">ndarray</span></code>) – an image represented as a matrix</li>
<li><strong>axis</strong> (<code class="docutils literal"><span class="pre">int</span></code>) – 0 for columns; 1 for rows.</li>
<li><strong>n_largest_override</strong> (<code class="docutils literal"><span class="pre">int</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – override the defaults for the number of inflections to report
when searching the image along a given axis.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">the location of large inflections (changes) in the image along a given axis.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">list</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="biovida.images.models.border_detection.lower_bar_analysis">
<code class="descclassname">biovida.images.models.border_detection.</code><code class="descname">lower_bar_analysis</code><span class="sig-paren">(</span><em>image_array</em>, <em>lower_bar_search_space</em>, <em>signal_strength_threshold</em>, <em>lower_bar_second_pass</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/models/border_detection.html#lower_bar_analysis"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.models.border_detection.lower_bar_analysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a two passes looking for a lower bar.
This can be helpful if the lower border is striated in such a way that could confuse the
algorithm. Namely, two the space between two lines of text can confuse the algorithm.
The first pass with truncate the first line; the second pass will truncate the line above it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>image_array</strong> (<code class="docutils literal"><span class="pre">2D</span> <span class="pre">ndarray</span></code>) – an image represented as a matrix.</li>
<li><strong>lower_bar_search_space</strong> (<code class="docutils literal"><span class="pre">float</span></code>) – a value between 0 and 1 specify the proportion of the image
to search for a lower bar (e.g., 0.90).</li>
<li><strong>signal_strength_threshold</strong> (<code class="docutils literal"><span class="pre">int</span></code> or <code class="docutils literal"><span class="pre">float</span></code>) – a value between 0 and 1 specify the signal strength required
for an area required to be considered a ‘lower bar’.
This is measured as a absolute value of the difference between
a location and the median signal strength of the average image.</li>
<li><strong>lower_bar_second_pass</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code> perform a second pass on the lower bar.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">the location of the start of the lower bar (i.e., edge).</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><code class="docutils literal"><span class="pre">int</span></code></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>Take the following lower border in an image:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>     <span class="o">---</span> <span class="n">Image</span> <span class="n">Here</span> <span class="o">---</span>
<span class="n">_____________________________</span>
<span class="n">The</span> <span class="n">quick</span> <span class="n">brown</span> <span class="n">fox</span> <span class="n">jumped</span>
<span class="n">over</span> <span class="n">jumps</span> <span class="n">over</span> <span class="n">the</span> <span class="n">lazy</span> <span class="n">dog</span>
<span class="o">-----------------------------</span>
</pre></div>
</div>
<p>One pass of this procedure should produce:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>     <span class="o">---</span> <span class="n">Image</span> <span class="n">Here</span> <span class="o">---</span>
<span class="n">_____________________________</span>
<span class="n">The</span> <span class="n">quick</span> <span class="n">brown</span> <span class="n">fox</span> <span class="n">jumped</span>
<span class="o">-----------------------------</span>
</pre></div>
</div>
<p>Following this up with a second pass should yeild:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>     <span class="o">---</span> <span class="n">Image</span> <span class="n">Here</span> <span class="o">---</span>
<span class="n">_____________________________</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="biovida.images.models.border_detection.border_detection">
<code class="descclassname">biovida.images.models.border_detection.</code><code class="descname">border_detection</code><span class="sig-paren">(</span><em>image</em>, <em>signal_strength_threshold=0.25</em>, <em>min_border_separation=0.15</em>, <em>lower_bar_search_space=0.9</em>, <em>report_signal_strength=False</em>, <em>rescale_input_ndarray=True</em>, <em>lower_bar_second_pass=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/models/border_detection.html#border_detection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.models.border_detection.border_detection" title="Permalink to this definition">¶</a></dt>
<dd><p>Detects the borders and lower bar in an image.</p>
<dl class="docutils">
<dt>At a high level, this algorithm works as follows:</dt>
<dd><ol class="first last arabic simple">
<li>Along a given axis (rows or columns), vectors
with standard deviation approximately equal to 0 are replaced with zero vectors. (a).</li>
<li>Values are averaged along this same axis.
This produces a signal (which can be visualized as a line graph). (b).</li>
<li>The median value for this signal is computed. (c).</li>
<li>The <code class="docutils literal"><span class="pre">n</span></code> points for which are the furthest, in absolute value, from the median are selected.</li>
<li>The signal strength of the <code class="docutils literal"><span class="pre">n</span></code> points is quantified using percent error, where the median value
is used as the expected value.</li>
<li>Candidates for border pairs (e.g., left and right borders) are then weighed based on three lines of evidence.
Namely, their signal strength, how separated they are and their absolute distance
from the image’s midline (about the corresponding axis). If a candidate fails to meet any of these criteria,
it is rejected.</li>
<li>The evidence for a lower bar concerns only its signal strength, though only an area of image below a given
height is considered when trying to locate it. A double pass, the default, will try a second time to find
another lower bar (for reasons explained in the docstring for the <code class="docutils literal"><span class="pre">lower_bar_analysis()</span></code> function).
Regardless of whether or not the second pass could find a second edge, all of the edges detect are averaged
and returned as an integer. If no plausible borders could be found, <code class="docutils literal"><span class="pre">None</span></code> is returned.</li>
</ol>
</dd>
</dl>
<ol class="loweralpha simple">
<li>This reduces the muffling effect that areas with solid color can have on step 2.</li>
<li>Large inflections after areas with little change suggest a transition from a solid background to an image.</li>
<li>The median is used here, as opposed to the average, because it is more robust against outliers.</li>
</ol>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>image</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">2D</span> <span class="pre">ndarray</span></code>) – <p>a path to an image or an image represented as a 2D ndarray.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If a <code class="docutils literal"><span class="pre">ndarray</span></code> is passed, it should be the output of the
<code class="docutils literal"><span class="pre">biovida.images.image_tools.load_image_rescale()</span></code> function.
Without this preprocessing, this function’s stability is not assured.</p>
</div>
</li>
<li><strong>signal_strength_threshold</strong> (<code class="docutils literal"><span class="pre">float</span></code>) – a value between 0 and 1 specify the signal strength required
for an area required to be considered a ‘lower bar’.
Internally, this is measured as a location deviation from
the median signal strength of the average image.</li>
<li><strong>min_border_separation</strong> (<code class="docutils literal"><span class="pre">float</span></code>) – a value between 0 and 1 that determines the proportion of the axis
that two edges must be separated for them to be considered borders.
(i.e., <code class="docutils literal"><span class="pre">axis_size</span></code> * <code class="docutils literal"><span class="pre">min_border_separation</span></code>)</li>
<li><strong>lower_bar_search_space</strong> (<code class="docutils literal"><span class="pre">float</span></code>) – a value between 0 and 1 specify the proportion of the image
to search for a lower bar (e.g., 0.90). Set to <code class="docutils literal"><span class="pre">None</span></code> to disable.</li>
<li><strong>report_signal_strength</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code> include the strength of the signal suggesting the existence of an edge.
Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>rescale_input_ndarray</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if True, rescale a <code class="docutils literal"><span class="pre">2D</span> <span class="pre">ndarray</span></code> passed to <code class="docutils literal"><span class="pre">image</span></code>.</li>
<li><strong>lower_bar_second_pass</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code> perform a second pass on the lower bar. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><dl class="docutils">
<dt>a dictionary of the form:</dt>
<dd><p class="first last"><code class="docutils literal"><span class="pre">{'vborder':</span> <span class="pre">(left,</span> <span class="pre">right)</span> <span class="pre">or</span> <span class="pre">None,</span> <span class="pre">'hborder':</span> <span class="pre">(upper,</span> <span class="pre">lower)</span> <span class="pre">or</span> <span class="pre">None,</span> <span class="pre">'hbar':</span> <span class="pre">int</span> <span class="pre">or</span> <span class="pre">None}</span></code></p>
</dd>
</dl>
<ul class="simple">
<li>’vborder’ gives the locations of vertical borders.</li>
<li>’hborder’ gives the locations of horizontal borders.</li>
<li>’hbar’ gives the location for the top of the horizontal bar at the bottom of the image.</li>
</ul>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">dict</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="module-biovida.genomics.disgenet_interface">
<span id="biovida-genomics-disgenet-interface-module"></span><h2>biovida.genomics.disgenet_interface module<a class="headerlink" href="#module-biovida.genomics.disgenet_interface" title="Permalink to this headline">¶</a></h2>
<div class="section" id="disgenet-interface">
<h3>DisGeNET Interface<a class="headerlink" href="#disgenet-interface" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="biovida.genomics.disgenet_interface.DisgenetInterface">
<em class="property">class </em><code class="descclassname">biovida.genomics.disgenet_interface.</code><code class="descname">DisgenetInterface</code><span class="sig-paren">(</span><em>cache_path=None</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/genomics/disgenet_interface.html#DisgenetInterface"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.genomics.disgenet_interface.DisgenetInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Python Interface for Harvesting Databases from <a class="reference external" href="http://www.disgenet.org/">DisGeNET</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cache_path</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – location of the BioVida cache. If one does not exist in this location, one will created.
Default to <code class="docutils literal"><span class="pre">None</span></code> (which will generate a cache in the home folder).</li>
<li><strong>verbose</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – If <code class="docutils literal"><span class="pre">True</span></code>, print notice when downloading database. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="biovida.genomics.disgenet_interface.DisgenetInterface.options">
<code class="descname">options</code><span class="sig-paren">(</span><em>database=None</em>, <em>pretty_print=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/genomics/disgenet_interface.html#DisgenetInterface.options"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.genomics.disgenet_interface.DisgenetInterface.options" title="Permalink to this definition">¶</a></dt>
<dd><p>Disgenet databases which can be downloaded
as well as additional information about the databases.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>database</strong> (<code class="docutils literal"><span class="pre">str</span></code>) – A database to review. Must be one of: ‘all’, ‘curated’, ‘snp_disgenet’ or <code class="docutils literal"><span class="pre">None</span></code>.
If a specific database is given, the database’s full name and description will be provided.
If <code class="docutils literal"><span class="pre">None</span></code>, a list of databases which can be downloaded will be returned (or printed).
Defaults to <code class="docutils literal"><span class="pre">None</span></code>.</li>
<li><strong>pretty_print</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – pretty print the information. Defaults to True.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">a <code class="docutils literal"><span class="pre">list</span></code> if <cite>database</cite> is <code class="docutils literal"><span class="pre">None</span></code>, else a <code class="docutils literal"><span class="pre">dict</span></code> with the database’s full name and description.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">list</span></code> or <code class="docutils literal"><span class="pre">dict</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.genomics.disgenet_interface.DisgenetInterface.pull">
<code class="descname">pull</code><span class="sig-paren">(</span><em>database</em>, <em>download_override=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/genomics/disgenet_interface.html#DisgenetInterface.pull"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.genomics.disgenet_interface.DisgenetInterface.pull" title="Permalink to this definition">¶</a></dt>
<dd><p>Pull (i.e., download) a DisGeNET Database.</p>
<p>Note: if a database is already cached, it will be used instead of downloading
(the <cite>download_override</cite> argument can be used override this behaviour).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>database</strong> (<code class="docutils literal"><span class="pre">str</span></code>) – A database to download. Must be one of: ‘all’, ‘curated’, ‘snp_disgenet’ or <code class="docutils literal"><span class="pre">None</span></code>.
See <code class="docutils literal"><span class="pre">options()</span></code> for more information.</li>
<li><strong>download_override</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – If <code class="docutils literal"><span class="pre">True</span></code>, override any existing database currently cached and download a new one.
Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">a DisGeNET database</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">Pandas</span> <span class="pre">DataFrame</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-biovida.diagnostics.disease_ont_interface">
<span id="biovida-diagnostics-disease-ont-interface"></span><h2>biovida.diagnostics.disease_ont_interface<a class="headerlink" href="#module-biovida.diagnostics.disease_ont_interface" title="Permalink to this headline">¶</a></h2>
<div class="section" id="disease-ontology-interface">
<h3>Disease Ontology Interface<a class="headerlink" href="#disease-ontology-interface" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="biovida.diagnostics.disease_ont_interface.DiseaseOntInterface">
<em class="property">class </em><code class="descclassname">biovida.diagnostics.disease_ont_interface.</code><code class="descname">DiseaseOntInterface</code><span class="sig-paren">(</span><em>cache_path=None</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/diagnostics/disease_ont_interface.html#DiseaseOntInterface"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.diagnostics.disease_ont_interface.DiseaseOntInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Python Interface for Harvesting the <a class="reference external" href="http://disease-ontology.org/">Disease Ontology</a> Database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cache_path</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – location of the BioVida cache. If one does not exist in this location, one will created.
Default to <code class="docutils literal"><span class="pre">None</span></code> (which will generate a cache in the home folder).</li>
<li><strong>verbose</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – If <code class="docutils literal"><span class="pre">True</span></code>, print notice when downloading database. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="biovida.diagnostics.disease_ont_interface.DiseaseOntInterface.pull">
<code class="descname">pull</code><span class="sig-paren">(</span><em>download_override=False</em>, <em>disease_ontology_db_url=’http://purl.obolibrary.org/obo/doid.obo’</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/diagnostics/disease_ont_interface.html#DiseaseOntInterface.pull"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.diagnostics.disease_ont_interface.DiseaseOntInterface.pull" title="Permalink to this definition">¶</a></dt>
<dd><p>Pull (i.e., download) the Disease Ontology Database.</p>
<p>Notes:</p>
<ul class="simple">
<li>if a database is already cached, it will be used instead of downloading (use <code class="docutils literal"><span class="pre">download_override</span></code> to override).</li>
<li>multiple values are separated by semicolons followed by a space, i.e., “; “.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>download_override</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – If <code class="docutils literal"><span class="pre">True</span></code>, override any existing database currently cached and download a new one.
Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>disease_ontology_db_url</strong> (<code class="docutils literal"><span class="pre">str</span></code>) – URL to the disease ontology database in ‘.obo’ format.
Defaults to ‘<a class="reference external" href="http://purl.obolibrary.org/obo/doid.obo">http://purl.obolibrary.org/obo/doid.obo</a>’.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">the Disease Ontology database as a DataFrame.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">Pandas</span> <span class="pre">DataFrame</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-biovida.diagnostics.disease_symptoms_interface">
<span id="biovida-diagnostics-disease-symptoms-interface"></span><h2>biovida.diagnostics.disease_symptoms_interface<a class="headerlink" href="#module-biovida.diagnostics.disease_symptoms_interface" title="Permalink to this headline">¶</a></h2>
<div class="section" id="disease-symptoms-interface">
<h3>Disease-Symptoms Interface<a class="headerlink" href="#disease-symptoms-interface" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="biovida.diagnostics.disease_symptoms_interface.DiseaseSymptomsInterface">
<em class="property">class </em><code class="descclassname">biovida.diagnostics.disease_symptoms_interface.</code><code class="descname">DiseaseSymptomsInterface</code><span class="sig-paren">(</span><em>cache_path=None</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/diagnostics/disease_symptoms_interface.html#DiseaseSymptomsInterface"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.diagnostics.disease_symptoms_interface.DiseaseSymptomsInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Tools to obtain databases relating symptoms to diseases.</p>
<p>References:</p>
<ul class="simple">
<li>Daniel Himmelstein, Antoine Lizee, Chrissy Hessler, Leo Brueggeman, Sabrina Chen, Dexter Hadley, Ari Green,
Pouya Khankhanian, Sergio Baranzini. Rephetio: Repurposing drugs on a hetnet [report]. Thinklab (2016).
doi:<a class="reference external" href="http://www.thinklab.com/p/rephetio/report#edges">10.15363/thinklab.a7</a>. Online Repository:
<a class="reference external" href="https://github.com/dhimmel/medline">https://github.com/dhimmel/medline</a>.</li>
<li>Zhou, XueZhong, Jörg Menche, Albert-László Barabási, and Amitabh Sharma. Human symptoms–disease network.
Nature communications 5 (2014). doi:<a class="reference external" href="http://www.nature.com/articles/ncomms5212">10.1038/ncomms5212</a>.
Online Repository: <a class="reference external" href="https://github.com/dhimmel/hsdn">https://github.com/dhimmel/hsdn</a>.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cache_path</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – location of the BioVida cache. If one does not exist in this location, one will created.
Default to <code class="docutils literal"><span class="pre">None</span></code> (which will generate a cache in the home folder).</li>
<li><strong>verbose</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – If <code class="docutils literal"><span class="pre">True</span></code>, print notice when downloading database. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="biovida.diagnostics.disease_symptoms_interface.DiseaseSymptomsInterface.hsdn_pull">
<code class="descname">hsdn_pull</code><span class="sig-paren">(</span><em>download_override=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/diagnostics/disease_symptoms_interface.html#DiseaseSymptomsInterface.hsdn_pull"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.diagnostics.disease_symptoms_interface.DiseaseSymptomsInterface.hsdn_pull" title="Permalink to this definition">¶</a></dt>
<dd><p>Pull (i.e., download) the Human Symptoms Disease Network Database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>download_override</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – If <code class="docutils literal"><span class="pre">True</span></code>, override any existing database currently cached and download a new one.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the Human Symptoms Disease Network database as a DataFrame.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal"><span class="pre">Pandas</span> <span class="pre">DataFrame</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.diagnostics.disease_symptoms_interface.DiseaseSymptomsInterface.rephetio_ml_pull">
<code class="descname">rephetio_ml_pull</code><span class="sig-paren">(</span><em>download_override=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/diagnostics/disease_symptoms_interface.html#DiseaseSymptomsInterface.rephetio_ml_pull"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.diagnostics.disease_symptoms_interface.DiseaseSymptomsInterface.rephetio_ml_pull" title="Permalink to this definition">¶</a></dt>
<dd><p>Pull (i.e., download) the Rephetio Medline Database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>download_override</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – If <code class="docutils literal"><span class="pre">True</span></code>, override any existing database currently cached and download a new one.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the Rephetio Medline database as a DataFrame.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal"><span class="pre">Pandas</span> <span class="pre">DataFrame</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.diagnostics.disease_symptoms_interface.DiseaseSymptomsInterface.pull">
<code class="descname">pull</code><span class="sig-paren">(</span><em>download_override=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/diagnostics/disease_symptoms_interface.html#DiseaseSymptomsInterface.pull"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.diagnostics.disease_symptoms_interface.DiseaseSymptomsInterface.pull" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a dataframe by combining the <cite>Rephetio Medline</cite> and <cite>Human Symptoms Disease Network</cite> databases.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>download_override</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – If <code class="docutils literal"><span class="pre">True</span></code>, override any existing database currently cached and download a new one.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a combined dataframe with the following columns: ‘common_disease_name’ and ‘common_symptom_term’.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal"><span class="pre">Pandas</span> <span class="pre">DataFrame</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="biovida-unify-domains">
<h2>biovida.unify_domains<a class="headerlink" href="#biovida-unify-domains" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-biovida.images.image_cache_mgmt">
<span id="biovida-image-cache-mgmt"></span><h2>biovida.image_cache_mgmt<a class="headerlink" href="#module-biovida.images.image_cache_mgmt" title="Permalink to this headline">¶</a></h2>
<div class="section" id="image-cache-management">
<h3>Image Cache Management<a class="headerlink" href="#image-cache-management" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="biovida.images.image_cache_mgmt.image_delete">
<code class="descclassname">biovida.images.image_cache_mgmt.</code><code class="descname">image_delete</code><span class="sig-paren">(</span><em>instance</em>, <em>delete_rule</em>, <em>only_recent=False</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/image_cache_mgmt.html#image_delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.image_cache_mgmt.image_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete rows, and associated images, from <code class="docutils literal"><span class="pre">records_db</span></code> and <code class="docutils literal"><span class="pre">cache_records_db</span></code>
DataFrames associated with <code class="docutils literal"><span class="pre">instance</span></code>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The effects of this function can only be undone by downloading the deleted data again.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The default behavior for this function is to delete <em>all</em> rows (and associated image(s))
that <code class="docutils literal"><span class="pre">delete_rule</span></code> authorizes. To limit deletion to the most recent data pull,
<code class="docutils literal"><span class="pre">only_recent</span></code> must be set to <code class="docutils literal"><span class="pre">True</span></code>.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>instance</strong> (<code class="docutils literal"><span class="pre">OpeniInterface</span></code>, <code class="docutils literal"><span class="pre">OpeniImageProcessing</span></code> or <code class="docutils literal"><span class="pre">CancerImageInterface</span></code>) – an instance of <code class="docutils literal"><span class="pre">OpeniInterface</span></code>, <code class="docutils literal"><span class="pre">OpeniImageProcessing</span></code> or <code class="docutils literal"><span class="pre">CancerImageInterface</span></code>.</li>
<li><strong>delete_rule</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">func</span></code>) – must be one of: <code class="docutils literal"><span class="pre">'all'</span></code> (delete <em>all</em> data) or a <code class="docutils literal"><span class="pre">function</span></code> which (1) accepts a single
parameter (argument) and (2) returns <code class="docutils literal"><span class="pre">True</span></code> when the data is to be deleted.</li>
<li><strong>only_recent</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code>, only apply <code class="docutils literal"><span class="pre">delete_rule</span></code> to data obtained in the most recent pull. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>verbose</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code>, print additional information.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">a dictionary of the indices which were dropped. Example: <code class="docutils literal"><span class="pre">{'records_db':</span> <span class="pre">[58,</span> <span class="pre">59],</span> <span class="pre">'cache_records_db':</span> <span class="pre">[158,</span> <span class="pre">159]}</span></code>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><code class="docutils literal"><span class="pre">dict</span></code></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">biovida.images</span> <span class="k">import</span> <span class="n">image_delete</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">biovida.images</span> <span class="k">import</span> <span class="n">OpeniInterface</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opi</span> <span class="o">=</span> <span class="n">OpeniInterface</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opi</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">image_type</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ct&#39;</span><span class="p">,</span> <span class="s1">&#39;mri&#39;</span><span class="p">],</span> <span class="n">collection</span><span class="o">=</span><span class="s1">&#39;medpix&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opi</span><span class="o">.</span><span class="n">pull</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_delete_rule</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;abstract&#39;</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="s1">&#39;Oompa Loompas&#39;</span> <span class="ow">in</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;abstract&#39;</span><span class="p">]:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">return</span> <span class="kc">True</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">image_delete</span><span class="p">(</span><span class="n">opi</span><span class="p">,</span> <span class="n">delete_rule</span><span class="o">=</span><span class="n">my_delete_rule</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In this example, any rows in the <code class="docutils literal"><span class="pre">records_db</span></code> and <code class="docutils literal"><span class="pre">cache_records_db</span></code>
for which the ‘abstract’ column contains the string ‘Oompa Loompas’ will be deleted.
Any images associated with this row will also be destroyed.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If a function is passed to <code class="docutils literal"><span class="pre">delete_rule</span></code> it <em>must</em> return a boolean <code class="docutils literal"><span class="pre">True</span></code> to delete a row.
<strong>All other output will be ignored</strong>.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="biovida.images.image_cache_mgmt.image_divvy">
<code class="descclassname">biovida.images.image_cache_mgmt.</code><code class="descname">image_divvy</code><span class="sig-paren">(</span><em>instance</em>, <em>divvy_rule</em>, <em>action=’ndarray’</em>, <em>db_to_extract=’records_db’</em>, <em>train_val_test_dict=None</em>, <em>create_dirs=True</em>, <em>allow_overwrite=True</em>, <em>image_column=None</em>, <em>stack=True</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/image_cache_mgmt.html#image_divvy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.image_cache_mgmt.image_divvy" title="Permalink to this definition">¶</a></dt>
<dd><p>Grouping Cached Images.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Currently, if an <code class="docutils literal"><span class="pre">OpeniImageProcessing</span></code> instance is first passed to
<code class="docutils literal"><span class="pre">biovida.unification.unify_against_images</span></code> and then to this function,
image cropping will not be applied.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>instance</strong> (<code class="docutils literal"><span class="pre">OpeniInterface</span></code>, <code class="docutils literal"><span class="pre">OpeniImageProcessing</span></code>, <code class="docutils literal"><span class="pre">CancerImageInterface</span></code> or <code class="docutils literal"><span class="pre">Pandas</span> <span class="pre">DataFrame</span></code>) – the yield of the yield of <code class="docutils literal"><span class="pre">biovida.unification.unify_against_images()</span></code> or an instance of
<code class="docutils literal"><span class="pre">OpeniInterface</span></code>, <code class="docutils literal"><span class="pre">OpeniImageProcessing</span></code> or <code class="docutils literal"><span class="pre">CancerImageInterface</span></code>.</li>
<li><strong>divvy_rule</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">func</span></code>) – must be a <cite>function`</cite> which (1) accepts a single parameter (argument) and (2) return
system path(s) [see example below].</li>
<li><strong>action</strong> (<code class="docutils literal"><span class="pre">str</span></code>) – <p>one of: <code class="docutils literal"><span class="pre">'copy'</span></code>, <code class="docutils literal"><span class="pre">'ndarray'</span></code>.</p>
<ul>
<li>if <code class="docutils literal"><span class="pre">'copy'</span></code>: copy from files from the cache to (i) the location prescribed by <code class="docutils literal"><span class="pre">divvy_rule</span></code>,
when <code class="docutils literal"><span class="pre">train_val_test_dict=None</span></code>, else (ii) the ‘target_location’ key in <code class="docutils literal"><span class="pre">train_val_test_dict</span></code>.</li>
<li>if <code class="docutils literal"><span class="pre">'ndarray'</span></code>: return a nested dictionary of <code class="docutils literal"><span class="pre">ndarray</span></code> (‘numpy’) arrays (default).</li>
</ul>
</li>
<li><strong>db_to_extract</strong> (<code class="docutils literal"><span class="pre">str</span></code>) – <p>the database to use. Must be one of:</p>
<ul>
<li>’records_db’: the dataframe resulting from the most recent <code class="docutils literal"><span class="pre">search()</span></code> &amp; <code class="docutils literal"><span class="pre">pull()</span></code> (default).</li>
<li>’cache_records_db’: the cache dataframe for <code class="docutils literal"><span class="pre">instance</span></code>.</li>
<li>’unify_against_images’: the yield of <code class="docutils literal"><span class="pre">biovida.unification.unify_against_images()</span></code>.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If an instance of <code class="docutils literal"><span class="pre">OpeniImageProcessing</span></code> is passed, the dataframe will be extracted automatically.</p>
</div>
</li>
<li><strong>train_val_test_dict</strong> (<code class="docutils literal"><span class="pre">None</span></code> or <code class="docutils literal"><span class="pre">dict</span></code>) – <p>a dictionary denoting the proportions for any of: <code class="docutils literal"><span class="pre">'train'</span></code>, <code class="docutils literal"><span class="pre">'validation'</span></code> and/or <code class="docutils literal"><span class="pre">'test'</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last">
<li>If <code class="docutils literal"><span class="pre">action='copy'</span></code>, a <code class="docutils literal"><span class="pre">'target_dir'</span></code> key (target directory) <em>must</em> also be included.</li>
<li>A <code class="docutils literal"><span class="pre">'random_state'</span></code> key can be passed, with an integer as the value, to seed shuffling.</li>
<li>To delete the source files, a <code class="docutils literal"><span class="pre">'delete_source'</span></code> key may be included (optional).
The corresponding value provided <em>must</em> be a boolean. If no such key key is provided,
<code class="docutils literal"><span class="pre">'delete_source'</span></code> defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
</ul>
</div>
</li>
<li><strong>create_dirs</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code>, create directories returned by <code class="docutils literal"><span class="pre">divvy_rule</span></code> if they do not exist. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
<li><strong>allow_overwrite</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code> allow existing images to be overwritten. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
<li><strong>image_column</strong> (<code class="docutils literal"><span class="pre">str</span></code>) – the column to use when copying images. If <code class="docutils literal"><span class="pre">None</span></code>, use <code class="docutils literal"><span class="pre">'cached_images_path'</span></code>. Defaults to <code class="docutils literal"><span class="pre">None</span></code>.</li>
<li><strong>stack</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code>, stack 3D volumes and time-series images when <code class="docutils literal"><span class="pre">action='ndarray'</span></code>. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
<li><strong>verbose</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code> print additional details. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><ul class="simple">
<li>If <code class="docutils literal"><span class="pre">divvy_rule</span></code> is a string:<ul>
<li>If <code class="docutils literal"><span class="pre">action='copy'</span></code> and <code class="docutils literal"><span class="pre">train_val_test_dict</span></code> is not dictionary, this function will
return a dictionary of the form <code class="docutils literal"><span class="pre">{divvy_rule:</span> <span class="pre">[cache_file_path,</span> <span class="pre">cache_file_path,</span> <span class="pre">...],</span> <span class="pre">...}</span></code>.</li>
</ul>
</li>
<li>If <code class="docutils literal"><span class="pre">divvy_rule</span></code> is a function:<ul>
<li>If <code class="docutils literal"><span class="pre">action='copy'</span></code> and <code class="docutils literal"><span class="pre">train_val_test_dict</span></code> is not a dictionary, this function will
return a dictionary of the form <code class="docutils literal"><span class="pre">{string</span> <span class="pre">returned</span> <span class="pre">by</span> <span class="pre">divvy_rule():</span> <span class="pre">[cache_file_path,</span> <span class="pre">cache_file_path,</span> <span class="pre">...],</span> <span class="pre">...}</span></code>.</li>
<li>If <code class="docutils literal"><span class="pre">action='ndarray'</span></code> and <code class="docutils literal"><span class="pre">train_val_test_dict</span></code> is not a dictionary, this function will
return a dictionary of the form <code class="docutils literal"><span class="pre">{string</span> <span class="pre">returned</span> <span class="pre">by</span> <span class="pre">divvy_rule():</span> <span class="pre">array([Image</span> <span class="pre">Matrix,</span> <span class="pre">Image</span> <span class="pre">Matrix,</span> <span class="pre">...]),</span> <span class="pre">...}</span></code>.</li>
<li>If <code class="docutils literal"><span class="pre">train_val_test_dict</span></code> is a dictionary, the output is powered by utilities.train_val_test
(available <a class="reference internal" href="#biovida.support_tools.utilities.train_val_test" title="biovida.support_tools.utilities.train_val_test"><code class="xref py py-func docutils literal"><span class="pre">here</span></code></a>).</li>
</ul>
</li>
</ul>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><code class="docutils literal"><span class="pre">dict</span></code></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">biovida.images</span> <span class="k">import</span> <span class="n">image_divvy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">biovida.images</span> <span class="k">import</span> <span class="n">OpeniInterface</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>Obtain Images</strong></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">opi</span> <span class="o">=</span> <span class="n">OpeniInterface</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opi</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">image_type</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;mri&#39;</span><span class="p">,</span> <span class="s1">&#39;ct&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opi</span><span class="o">.</span><span class="n">pull</span><span class="p">()</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>Usage 1a</strong>: Copy Images from the Cache to a New Location</div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">summary_dict</span> <span class="o">=</span> <span class="n">image_divvy</span><span class="p">(</span><span class="n">opi</span><span class="p">,</span> <span class="n">divvy_rule</span><span class="o">=</span><span class="s2">&quot;/your/output/path/here/output&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;copy&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>Usage 1b</strong>: Converting to <code class="docutils literal"><span class="pre">ndarrays</span></code></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_divvy_rule1</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;image_modality_major&#39;</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">if</span> <span class="s1">&#39;mri&#39;</span> <span class="o">==</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;image_modality_major&#39;</span><span class="p">]:</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="k">return</span> <span class="s1">&#39;mri&#39;</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">elif</span> <span class="s1">&#39;ct&#39;</span> <span class="o">==</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;image_modality_major&#39;</span><span class="p">]:</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="k">return</span> <span class="s1">&#39;ct&#39;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nd_data</span> <span class="o">=</span> <span class="n">image_divvy</span><span class="p">(</span><span class="n">opi</span><span class="p">,</span> <span class="n">divvy_rule</span><span class="o">=</span><span class="n">my_divvy_rule1</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;ndarray&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The resultant <code class="docutils literal"><span class="pre">ndarrays</span></code> can be extracted as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ct_images</span> <span class="o">=</span> <span class="n">nd_data</span><span class="p">[</span><span class="s1">&#39;ct&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mri_images</span> <span class="o">=</span> <span class="n">nd_data</span><span class="p">[</span><span class="s1">&#39;mri&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>Usage 2a</strong>: A Rule which Invariably Returns a Single Save Location for a Single Row</div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_divvy_rule2</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;image_modality_major&#39;</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">if</span> <span class="s1">&#39;mri&#39;</span> <span class="o">==</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;image_modality_major&#39;</span><span class="p">]:</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="k">return</span> <span class="s1">&#39;/your/path/here/MRI_images&#39;</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">elif</span> <span class="s1">&#39;ct&#39;</span> <span class="o">==</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;image_modality_major&#39;</span><span class="p">]:</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="k">return</span> <span class="s1">&#39;/your/path/here/CT_images&#39;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary_dict</span> <span class="o">=</span> <span class="n">image_divvy</span><span class="p">(</span><span class="n">opi</span><span class="p">,</span> <span class="n">divvy_rule</span><span class="o">=</span><span class="n">my_divvy_rule2</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;copy&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>Usage 2b</strong>: A Rule which can Return Multiple Save Locations for a Single Row</div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_divvy_rule2</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">locations</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;image_modality_major&#39;</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">if</span> <span class="s1">&#39;leg&#39;</span> <span class="ow">in</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;abstract&#39;</span><span class="p">]:</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="n">locations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;/your/path/here/leg_images&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">if</span> <span class="s1">&#39;pelvis&#39;</span> <span class="ow">in</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;abstract&#39;</span><span class="p">]:</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="n">locations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;/your/path/here/pelvis_images&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="n">locations</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary_dict</span><span class="o">=</span> <span class="n">image_divvy</span><span class="p">(</span><span class="n">opi</span><span class="p">,</span> <span class="n">divvy_rule</span><span class="o">=</span><span class="n">my_divvy_rule2</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;copy&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>Usage 3</strong>: Divvying into <em>train/validation/test</em></div>
</div>
<p><strong>i</strong>. Copying to a New Location (reusing <code class="docutils literal"><span class="pre">my_divvy_rule1</span></code>)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">train_val_test_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;train&#39;</span><span class="p">:</span> <span class="mf">0.7</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span> <span class="s1">&#39;target_dir&#39;</span><span class="p">:</span> <span class="s1">&#39;/your/path/here/output&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary_dict</span> <span class="o">=</span> <span class="n">image_divvy</span><span class="p">(</span><span class="n">opi</span><span class="p">,</span> <span class="n">divvy_rule</span><span class="o">=</span><span class="n">my_divvy_rule1</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;copy&#39;</span><span class="p">,</span> <span class="n">train_val_test_dict</span><span class="o">=</span><span class="n">train_val_test_dict</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>ii</strong>. Obtaining <code class="docutils literal"><span class="pre">ndarrays</span></code> (numpy arrays)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">train_val_test_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;train&#39;</span><span class="p">:</span> <span class="mf">0.7</span><span class="p">,</span> <span class="s1">&#39;validation&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">image_dict</span> <span class="o">=</span> <span class="n">image_divvy</span><span class="p">(</span><span class="n">opi</span><span class="p">,</span> <span class="n">divvy_rule</span><span class="o">=</span><span class="n">my_divvy_rule1</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;ndarray&#39;</span><span class="p">,</span> <span class="n">train_val_test_dict</span><span class="o">=</span><span class="n">train_val_test_dict</span><span class="p">)</span>
</pre></div>
</div>
<p>The resultant <code class="docutils literal"><span class="pre">ndarrays</span></code> can be unpacked as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">train_ct</span><span class="p">,</span> <span class="n">train_mri</span> <span class="o">=</span> <span class="n">image_dict</span><span class="p">[</span><span class="s1">&#39;train&#39;</span><span class="p">][</span><span class="s1">&#39;ct&#39;</span><span class="p">],</span> <span class="n">image_dict</span><span class="p">[</span><span class="s1">&#39;train&#39;</span><span class="p">][</span><span class="s1">&#39;mri&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">val_ct</span><span class="p">,</span> <span class="n">val_mri</span> <span class="o">=</span> <span class="n">image_dict</span><span class="p">[</span><span class="s1">&#39;validation&#39;</span><span class="p">][</span><span class="s1">&#39;ct&#39;</span><span class="p">],</span> <span class="n">image_dict</span><span class="p">[</span><span class="s1">&#39;validation&#39;</span><span class="p">][</span><span class="s1">&#39;mri&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_ct</span><span class="p">,</span> <span class="n">test_mri</span> <span class="o">=</span> <span class="n">image_dict</span><span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">][</span><span class="s1">&#39;ct&#39;</span><span class="p">],</span> <span class="n">image_dict</span><span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">][</span><span class="s1">&#39;mri&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>This function behaves the same if passed an instance of <code class="docutils literal"><span class="pre">OpeniImageProcessing</span></code></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">biovida.images</span> <span class="k">import</span> <span class="n">OpeniImageProcessing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ip</span> <span class="o">=</span> <span class="n">OpeniImageProcessing</span><span class="p">(</span><span class="n">opi</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ip</span><span class="o">.</span><span class="n">auto</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ip</span><span class="o">.</span><span class="n">clean_image_dataframe</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">image_dict</span> <span class="o">=</span> <span class="n">image_divvy</span><span class="p">(</span><span class="n">ip</span><span class="p">,</span> <span class="n">divvy_rule</span><span class="o">=</span><span class="n">my_divvy_rule1</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;ndarray&#39;</span><span class="p">,</span> <span class="n">train_val_test_dict</span><span class="o">=</span><span class="n">train_val_test_dict</span><span class="p">)</span>
<span class="gp">...</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If an instance of <code class="docutils literal"><span class="pre">OpeniImageProcessing</span></code> is passed to <code class="docutils literal"><span class="pre">image_divvy</span></code>, the <code class="docutils literal"><span class="pre">image_data_frame_cleaned</span></code>
dataframe will be extracted.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If a function passed to <code class="docutils literal"><span class="pre">divvy_rule</span></code> returns a system path when a dictionary has been passed
to <code class="docutils literal"><span class="pre">train_val_test_dict</span></code>, only the basename of the system path will be used.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">While it is possible to pass a function to <code class="docutils literal"><span class="pre">divvy_rule</span></code> which returns multiple categories
(similar to <code class="docutils literal"><span class="pre">my_divvy_rule2()</span></code>) when divvying into <em>train/validation/test</em>, doing
so is not recommended. Overlap between these groups is likely to lead to erroneous
performance metrics (e.g., accuracy) when assessing fitted models.</p>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="module-biovida.support_tools.printing">
<span id="biovida-support-tools"></span><h2>biovida.support_tools<a class="headerlink" href="#module-biovida.support_tools.printing" title="Permalink to this headline">¶</a></h2>
<div class="section" id="printing-tools">
<h3>Printing Tools<a class="headerlink" href="#printing-tools" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="biovida.support_tools.printing.dict_pprint">
<code class="descclassname">biovida.support_tools.printing.</code><code class="descname">dict_pprint</code><span class="sig-paren">(</span><em>d</em>, <em>sort_keys=True</em>, <em>space_entries=True</em>, <em>max_value_length=70</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/support_tools/printing.html#dict_pprint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.support_tools.printing.dict_pprint" title="Permalink to this definition">¶</a></dt>
<dd><p>Pretty prints a dictionary with vertically aligned values.
Dictionary values with strings longer than <cite>max_value_length</cite>
are automatically broken and aligned with the line(s) above.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>d</strong> (<code class="docutils literal"><span class="pre">dict</span></code>) – a dictionary</li>
<li><strong>sort_keys</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code>, sort the keys in alphabetical order.</li>
<li><strong>space_entries</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code>, insert a line break between entries.</li>
<li><strong>max_value_length</strong> (<code class="docutils literal"><span class="pre">int</span></code>) – max. number of characters in a string before a line break.
This is a fuzzy threshold because the algorithm will only insert
line breaks where there are already spaces.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span>
<span class="go">&#39;part_2&#39;: &#39;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut dictum nisi sed euismod consequat. &#39;</span>
<span class="go">          &#39;Donec tempus enim nec lorem ornare, non sagittis dolor consequat. Sed facilisis tortor &#39;</span>
<span class="go">          &#39;vel enim mattis, et fermentum mi posuere.&#39;,</span>
<span class="go">&#39;part_1&#39;: &#39;Duis sit amet nulla fermentum, vestibulum mauris at, porttitor massa. &#39;</span>
<span class="go">          &#39;Vestibulum luctus interdum mattis.&#39;</span>
<span class="go">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_pprint</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go"> - Part 2:  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut dictum nisi</span>
<span class="go">            sed euismod consequat. Donec tempus enim nec lorem ornare, non sagittis</span>
<span class="go">            dolor consequat. Sed facilisis tortor vel enim mattis, et fermentum</span>
<span class="go">            mi posuere.</span>
<span class="go"> - Part 1:  Duis sit amet nulla fermentum, vestibulum mauris at, porttitor massa.</span>
<span class="go">            Vestibulum luctus interdum mattis.</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="biovida.support_tools.printing.pandas_pprint">
<code class="descclassname">biovida.support_tools.printing.</code><code class="descname">pandas_pprint</code><span class="sig-paren">(</span><em>data</em>, <em>col_align=’right’</em>, <em>header_align=’center’</em>, <em>full_rows=False</em>, <em>full_cols=False</em>, <em>suppress_index=False</em>, <em>column_width_limit=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/support_tools/printing.html#pandas_pprint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.support_tools.printing.pandas_pprint" title="Permalink to this definition">¶</a></dt>
<dd><p>Pretty Print a Pandas DataFrame or Series.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>data</strong> (<code class="docutils literal"><span class="pre">Pandas</span> <span class="pre">DataFrame</span></code> or <code class="docutils literal"><span class="pre">Pandas</span> <span class="pre">Series</span></code>) – a dataframe or series.</li>
<li><strong>col_align</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">dict</span></code>) – ‘left’, ‘right’, ‘center’ or a dictionary of the form: <code class="docutils literal"><span class="pre">{'column_name':</span> <span class="pre">'alignment'}</span></code>,
e.g., <code class="docutils literal"><span class="pre">{'my_column':</span> <span class="pre">'left',</span> <span class="pre">'my_column2':</span> <span class="pre">'right'}</span></code>.</li>
<li><strong>header_align</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">dict</span></code>) – alignment of headers. Must be one of: ‘left’, ‘right’, ‘center’.</li>
<li><strong>full_rows</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – print all rows.</li>
<li><strong>full_cols</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – print all columns.</li>
<li><strong>suppress_index</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code>, suppress the index. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>column_width_limit</strong> (<code class="docutils literal"><span class="pre">int</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – change limit on how wide columns can be. If <code class="docutils literal"><span class="pre">None</span></code>, no change will be made.
Defaults to <code class="docutils literal"><span class="pre">None</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<span class="target" id="module-biovida.support_tools.utilities"></span><div class="section" id="utilities">
<h3>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="biovida.support_tools.utilities.train_val_test">
<code class="descclassname">biovida.support_tools.utilities.</code><code class="descname">train_val_test</code><span class="sig-paren">(</span><em>data</em>, <em>train</em>, <em>validation</em>, <em>test</em>, <em>target_dir=None</em>, <em>action=’ndarray’</em>, <em>delete_source=False</em>, <em>stack=True</em>, <em>random_state=None</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/support_tools/utilities.html#train_val_test"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.support_tools.utilities.train_val_test" title="Permalink to this definition">¶</a></dt>
<dd><p>Split <code class="docutils literal"><span class="pre">data</span></code> into any combination of the following: <code class="docutils literal"><span class="pre">train</span></code>, <code class="docutils literal"><span class="pre">validation</span></code> and/or <code class="docutils literal"><span class="pre">test</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<code class="docutils literal"><span class="pre">dict</span></code> or <code class="docutils literal"><span class="pre">str</span></code>) – <ul>
<li>a dictionary of the form: <code class="docutils literal"><span class="pre">{group_name:</span> <span class="pre">[file_path,</span> <span class="pre">file_path,</span> <span class="pre">...],</span> <span class="pre">...}</span></code>.</li>
<li>the directory containing the data. This directory should contain subdirectories (the categories)
populated with the files.</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If a directory is passed, subdirectories therein entitled ‘train’, ‘validation’ and ‘test’
will be ignored.</p>
</div>
</li>
<li><strong>train</strong> (<code class="docutils literal"><span class="pre">int</span></code>, <code class="docutils literal"><span class="pre">float</span></code>, <code class="docutils literal"><span class="pre">bool</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – the proportion images in <code class="docutils literal"><span class="pre">data</span></code> to allocate to <code class="docutils literal"><span class="pre">train</span></code>. If <code class="docutils literal"><span class="pre">False</span></code> or <code class="docutils literal"><span class="pre">None</span></code>,
no images will be allocated.</li>
<li><strong>validation</strong> (<code class="docutils literal"><span class="pre">int</span></code>, <code class="docutils literal"><span class="pre">float</span></code>, <code class="docutils literal"><span class="pre">bool</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – the proportion images in <code class="docutils literal"><span class="pre">data</span></code> to allocate to <code class="docutils literal"><span class="pre">validation</span></code>. If <code class="docutils literal"><span class="pre">False</span></code>
or <code class="docutils literal"><span class="pre">None</span></code>, no images will be allocated.</li>
<li><strong>test</strong> (<code class="docutils literal"><span class="pre">int</span></code>, <code class="docutils literal"><span class="pre">float</span></code>, <code class="docutils literal"><span class="pre">bool</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – the proportion images in <code class="docutils literal"><span class="pre">data</span></code> to allocate to <code class="docutils literal"><span class="pre">test</span></code>. If <code class="docutils literal"><span class="pre">False</span></code> or <code class="docutils literal"><span class="pre">None</span></code>,
no images will be allocated.</li>
<li><strong>target_dir</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) – <dl class="docutils">
<dt>the location to output the images to (if action is ‘copy’ or ‘move’). </dt>
<dd>If <code class="docutils literal"><span class="pre">None</span></code>, the output location will be <code class="docutils literal"><span class="pre">data</span></code>. Defaults to <code class="docutils literal"><span class="pre">None</span></code>.</dd>
</dl>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><code class="docutils literal"><span class="pre">target_dir</span></code> must be a string if <code class="docutils literal"><span class="pre">data</span></code> is not.</p>
</div>
</li>
<li><strong>action</strong> (<code class="docutils literal"><span class="pre">str</span></code>) – <p>one of: ‘copy’, ‘move’ or ‘ndarray’.</p>
<ul>
<li>if <code class="docutils literal"><span class="pre">'copy'</span></code>: copy from files from <code class="docutils literal"><span class="pre">data</span></code> to <code class="docutils literal"><span class="pre">target_dir</span></code>.</li>
<li>if <code class="docutils literal"><span class="pre">'move'</span></code>: move from files from <code class="docutils literal"><span class="pre">data</span></code> to <code class="docutils literal"><span class="pre">target_dir</span></code>.</li>
<li>if <code class="docutils literal"><span class="pre">'ndarray'</span></code>: return a nested dictionary of <code class="docutils literal"><span class="pre">ndarray</span></code> (‘numpy’) arrays (default).</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><strong>Using ‘move’ directly on files in a cache is not recommended</strong>.
However, if such an action is performed, the corresponding class
must be reinstated to allow the <code class="docutils literal"><span class="pre">cache_records_db</span></code> database to update.</p>
</div>
</li>
<li><strong>delete_source</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – <p>if <code class="docutils literal"><span class="pre">True</span></code> delete the source subdirectories in <code class="docutils literal"><span class="pre">data</span></code> after copying is complete. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This can be useful for transforming a directory ‘in-place’,
e.g., if <code class="docutils literal"><span class="pre">data</span></code> and <code class="docutils literal"><span class="pre">target_dir</span></code> are the same and <code class="docutils literal"><span class="pre">delete_source=True</span></code>.</p>
</div>
</li>
<li><strong>stack</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code>, stack 3D volumes and time-series images when <code class="docutils literal"><span class="pre">action='ndarray'</span></code>. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
<li><strong>random_state</strong> (<code class="docutils literal"><span class="pre">None</span></code> or <code class="docutils literal"><span class="pre">int</span></code>) – set a seed for random shuffling. Similar to <code class="docutils literal"><span class="pre">sklearn.model_selection.train_test_split</span></code>.
Defaults to <code class="docutils literal"><span class="pre">None</span></code>.</li>
<li><strong>verbose</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code>, print the resultant structure. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>a dictionary of the form: <code class="docutils literal"><span class="pre">{one</span> <span class="pre">of</span> <span class="pre">'train',</span> <span class="pre">'validation'</span> <span class="pre">or</span> <span class="pre">'test':</span> <span class="pre">{subdirectory</span> <span class="pre">in</span> <span class="pre">`data`:</span> <span class="pre">[file_path,</span> <span class="pre">file_path,</span> <span class="pre">...],</span> <span class="pre">...},</span> <span class="pre">...}</span></code>.</p>
<ul class="simple">
<li>if <code class="docutils literal"><span class="pre">action='copy'</span></code>: the dictionary returned will be exactly as shown above.</li>
<li>if <code class="docutils literal"><span class="pre">action='ndarray'</span></code>: ‘file_path’ will be replaced with the image as a <code class="docutils literal"><span class="pre">ndarray</span></code> and the list will be
<code class="docutils literal"><span class="pre">ndarray``s,</span> <span class="pre">i.e.,</span> <span class="pre">``array([Image</span> <span class="pre">Matrix,</span> <span class="pre">Image</span> <span class="pre">Matrix,</span> <span class="pre">...])</span></code>.</li>
</ul>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><code class="docutils literal"><span class="pre">dict</span></code></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><strong>ValueError</strong> – if the combination of <code class="docutils literal"><span class="pre">train</span></code>, <code class="docutils literal"><span class="pre">validation</span></code>, <code class="docutils literal"><span class="pre">test</span></code> which which were passed
numeric values (i.e., <code class="docutils literal"><span class="pre">int</span></code> or <code class="docutils literal"><span class="pre">float</span></code>) do not sum to 1.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Files are randomly shuffled prior to assignment.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">In the case of division with a remainder, preference is as follows: <cite>train</cite> &lt; <cite>validation</cite> &lt; <cite>test</cite>.
For instance, if we have <code class="docutils literal"><span class="pre">train=0.7</span></code>, <code class="docutils literal"><span class="pre">validation=0.3</span></code>, and the number of files in a given subdirectory
equal to <code class="docutils literal"><span class="pre">6</span></code> (as in the final example below) the number of files allocated to <cite>train</cite> will be rounded
down, in favor of <cite>validation</cite> obtaining the final file. In this instance, <cite>train</cite> would obtain
<cite>4</cite> files (<code class="docutils literal"><span class="pre">floor(0.7</span> <span class="pre">*</span> <span class="pre">6)</span> <span class="pre">=</span> <span class="pre">4</span></code>) and <cite>validation</cite> would obtain 2 files (<code class="docutils literal"><span class="pre">ceil(0.3</span> <span class="pre">*</span> <span class="pre">6)</span> <span class="pre">=</span> <span class="pre">2</span></code>).</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>The examples below use a sample directory entitled <code class="docutils literal"><span class="pre">images</span></code>.</p>
<p>This is its structure:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ tree /path/to/data/images
├── ct
│   ├── ct_1.png
│   ├── ct_2.png
│   ├── ct_3.png
│   ├── ct_4.png
│   ├── ct_5.png
│   └── ct_6.png
└── mri
    ├── mri_1.png
    ├── mri_2.png
    ├── mri_3.png
    ├── mri_4.png
    ├── mri_5.png
    └── mri_6.png
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>Usage 1</strong>: Obtaining ndarrays</div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">biovida.support_tools</span> <span class="k">import</span> <span class="n">train_val_test</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tt</span> <span class="o">=</span> <span class="n">train_val_test</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;/path/to/data/images&#39;</span><span class="p">,</span> <span class="n">train</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">validation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">test</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
<span class="gp">... </span>                    <span class="n">action</span><span class="o">=</span><span class="s1">&#39;ndarray&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The resultant ndarrays can be unpacked into objects as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">train_ct</span><span class="p">,</span> <span class="n">train_mri</span> <span class="o">=</span> <span class="n">tt</span><span class="p">[</span><span class="s1">&#39;train&#39;</span><span class="p">][</span><span class="s1">&#39;ct&#39;</span><span class="p">],</span> <span class="n">tt</span><span class="p">[</span><span class="s1">&#39;train&#39;</span><span class="p">][</span><span class="s1">&#39;mri&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_ct</span><span class="p">,</span> <span class="n">test_mri</span> <span class="o">=</span> <span class="n">tt</span><span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">][</span><span class="s1">&#39;ct&#39;</span><span class="p">],</span> <span class="n">tt</span><span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">][</span><span class="s1">&#39;mri&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><strong>Usage 2</strong>: Reorganize a Directory In-place</div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">biovida.support_tools</span> <span class="k">import</span> <span class="n">train_val_test</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tv</span> <span class="o">=</span> <span class="n">train_val_test</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;/path/to/data/images&#39;</span><span class="p">,</span> <span class="n">train</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">validation</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">test</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>                    <span class="n">action</span><span class="o">=</span><span class="s1">&#39;copy&#39;</span><span class="p">,</span> <span class="n">delete_source</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Which results in the following structure:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ tree /path/to/data/images
├── train
│   ├── ct
│   │   ├── ct_4.png
│   │   ├── ct_5.png
│   │   ├── ct_3.png
│   │   └── ct_1.png
│   └── mri
│       ├── mri_2.png
│       ├── mri_1.png
│       ├── mri_5.png
│       └── mri_4.png
└── validation
    ├── ct
    │   ├── ct_2.png
    │   └── ct_6.png
    └── mri
        ├── mri_3.png
        └── mri_6.png
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The following changes to <strong>Usage 2</strong> would preserve the original <code class="docutils literal"><span class="pre">ct</span></code> and <code class="docutils literal"><span class="pre">mri</span></code> directories:</p>
<ul class="last simple">
<li>setting <code class="docutils literal"><span class="pre">delete_source=False</span></code> (the default) and/or</li>
<li>providing a path to <code class="docutils literal"><span class="pre">target_dir</span></code>, e.g., <code class="docutils literal"><span class="pre">target_dir='/path/to/output/output_data'</span></code></li>
</ul>
</div>
</dd></dl>

<dl class="function">
<dt id="biovida.support_tools.utilities.reverse_train_val_test">
<code class="descclassname">biovida.support_tools.utilities.</code><code class="descname">reverse_train_val_test</code><span class="sig-paren">(</span><em>data</em>, <em>delete_source=True</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/support_tools/utilities.html#reverse_train_val_test"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.support_tools.utilities.reverse_train_val_test" title="Permalink to this definition">¶</a></dt>
<dd><p>Reverse the action of <code class="docutils literal"><span class="pre">train_val_test</span></code> on a directory.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<code class="docutils literal"><span class="pre">str</span></code>) – the path to the directory created by <code class="docutils literal"><span class="pre">train_val_test</span></code>.</li>
<li><strong>delete_source</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code> delete the empty train/validation/test directories in <code class="docutils literal"><span class="pre">data</span></code> after the move is
complete. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
<li><strong>verbose</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) – if <code class="docutils literal"><span class="pre">True</span></code>, print the resultant structure. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>Initial Directory Structure:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ tree /path/to/data/images
├── ct
│   ├── ct_1.png
│   ├── ct_2.png
│   ├── ct_3.png
│   ├── ct_4.png
│   ├── ct_5.png
│   └── ct_6.png
└── mri
    ├── mri_1.png
    ├── mri_2.png
    ├── mri_3.png
    ├── mri_4.png
    ├── mri_5.png
    └── mri_6.png
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">biovida.support_tools</span> <span class="k">import</span> <span class="n">train_val_test</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tv</span> <span class="o">=</span> <span class="n">train_val_test</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;/path/to/data/images&#39;</span><span class="p">,</span> <span class="n">train</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">validation</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">test</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>                    <span class="n">action</span><span class="o">=</span><span class="s1">&#39;copy&#39;</span><span class="p">,</span> <span class="n">delete_source</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ tree /path/to/data/images
├── train
│   ├── ct
│   │   ├── ct_4.png
│   │   ├── ct_5.png
│   │   ├── ct_3.png
│   │   └── ct_1.png
│   └── mri
│       ├── mri_2.png
│       ├── mri_1.png
│       ├── mri_5.png
│       └── mri_4.png
└── validation
    ├── ct
    │   ├── ct_2.png
    │   └── ct_6.png
    └── mri
        ├── mri_3.png
        └── mri_6.png
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">reverse_train_val_test</span><span class="p">(</span><span class="s1">&#39;/path/to/data/images&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ tree /path/to/data/images
├── ct
│   ├── ct_1.png
│   ├── ct_2.png
│   ├── ct_3.png
│   ├── ct_4.png
│   ├── ct_5.png
│   └── ct_6.png
└── mri
    ├── mri_1.png
    ├── mri_2.png
    ├── mri_3.png
    ├── mri_4.png
    ├── mri_5.png
    └── mri_6.png
</pre></div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="module-biovida">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-biovida" title="Permalink to this headline">¶</a></h2>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017, Tariq A. Hassan.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>